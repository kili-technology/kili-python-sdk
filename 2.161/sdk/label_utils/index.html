
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Kili Python SDK">
      
      
      
        <link rel="canonical" href="https://python-sdk-docs.kili-technology.com/2.161/sdk/label_utils/">
      
      
        <link rel="prev" href="../label/">
      
      
        <link rel="next" href="../label_parsing/">
      
      
      <link rel="icon" href="../../assets/kili_favicon.ico">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.39">
    
    
      
        <title>Label Utils - Python SDK</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.8c3ca2c6.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Archia:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Archia";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.4/katex.min.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-HRVEXSEWL0"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-HRVEXSEWL0",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-HRVEXSEWL0",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="kili" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#label-utils-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Python SDK" class="md-header__button md-logo" aria-label="Python SDK" data-md-component="logo">
      
  <img src="../../assets/kili_logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Python SDK
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Label Utils
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/kili-technology/kili-python-sdk" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Kili Python SDK
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../.." class="md-tabs__link">
          
  
  Python SDK

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../cli/" class="md-tabs__link">
          
  
  Command Line Interface

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../tutorials/" class="md-tabs__link">
          
  
  Tutorials

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Python SDK" class="md-nav__button md-logo" aria-label="Python SDK" data-md-component="logo">
      
  <img src="../../assets/kili_logo.png" alt="logo">

    </a>
    Python SDK
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/kili-technology/kili-python-sdk" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.6.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    Kili Python SDK
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Python SDK
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            Python SDK
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1_3" checked>
        
          
          <label class="md-nav__link" for="__nav_1_3" id="__nav_1_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_1_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1_3">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../asset/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Asset
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cloud_storage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cloud Storage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../issue/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Issue
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../label/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Label
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Label Utils
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Label Utils
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#points" class="md-nav__link">
    <span class="md-ellipsis">
      Points
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Points">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.point.normalized_point_to_point" class="md-nav__link">
    <span class="md-ellipsis">
      normalized_point_to_point()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.point.point_to_normalized_point" class="md-nav__link">
    <span class="md-ellipsis">
      point_to_normalized_point()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bounding-boxes" class="md-nav__link">
    <span class="md-ellipsis">
      Bounding boxes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bounding boxes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.bbox.bbox_points_to_normalized_vertices" class="md-nav__link">
    <span class="md-ellipsis">
      bbox_points_to_normalized_vertices()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.bbox.normalized_vertices_to_bbox_points" class="md-nav__link">
    <span class="md-ellipsis">
      normalized_vertices_to_bbox_points()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#polygon-and-segmentation-masks" class="md-nav__link">
    <span class="md-ellipsis">
      Polygon and segmentation masks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Polygon and segmentation masks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.image.mask_to_normalized_vertices" class="md-nav__link">
    <span class="md-ellipsis">
      mask_to_normalized_vertices()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.image.normalized_vertices_to_mask" class="md-nav__link">
    <span class="md-ellipsis">
      normalized_vertices_to_mask()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geojson" class="md-nav__link">
    <span class="md-ellipsis">
      GeoJson
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GeoJson">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#point" class="md-nav__link">
    <span class="md-ellipsis">
      Point
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.point.geojson_point_feature_to_kili_point_annotation" class="md-nav__link">
    <span class="md-ellipsis">
      geojson_point_feature_to_kili_point_annotation()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.point.kili_point_annotation_to_geojson_point_feature" class="md-nav__link">
    <span class="md-ellipsis">
      kili_point_annotation_to_geojson_point_feature()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.point.kili_point_to_geojson_point" class="md-nav__link">
    <span class="md-ellipsis">
      kili_point_to_geojson_point()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#line" class="md-nav__link">
    <span class="md-ellipsis">
      Line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.line.geojson_linestring_feature_to_kili_line_annotation" class="md-nav__link">
    <span class="md-ellipsis">
      geojson_linestring_feature_to_kili_line_annotation()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.line.kili_line_annotation_to_geojson_linestring_feature" class="md-nav__link">
    <span class="md-ellipsis">
      kili_line_annotation_to_geojson_linestring_feature()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.line.kili_line_to_geojson_linestring" class="md-nav__link">
    <span class="md-ellipsis">
      kili_line_to_geojson_linestring()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bounding-box" class="md-nav__link">
    <span class="md-ellipsis">
      Bounding box
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.bbox.geojson_polygon_feature_to_kili_bbox_annotation" class="md-nav__link">
    <span class="md-ellipsis">
      geojson_polygon_feature_to_kili_bbox_annotation()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.bbox.kili_bbox_annotation_to_geojson_polygon_feature" class="md-nav__link">
    <span class="md-ellipsis">
      kili_bbox_annotation_to_geojson_polygon_feature()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.bbox.kili_bbox_to_geojson_polygon" class="md-nav__link">
    <span class="md-ellipsis">
      kili_bbox_to_geojson_polygon()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#polygon" class="md-nav__link">
    <span class="md-ellipsis">
      Polygon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.polygon.geojson_polygon_feature_to_kili_polygon_annotation" class="md-nav__link">
    <span class="md-ellipsis">
      geojson_polygon_feature_to_kili_polygon_annotation()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.polygon.get_oriented_area" class="md-nav__link">
    <span class="md-ellipsis">
      get_oriented_area()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.polygon.kili_polygon_annotation_to_geojson_polygon_feature" class="md-nav__link">
    <span class="md-ellipsis">
      kili_polygon_annotation_to_geojson_polygon_feature()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.polygon.kili_polygon_to_geojson_polygon" class="md-nav__link">
    <span class="md-ellipsis">
      kili_polygon_to_geojson_polygon()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.polygon.order_counter_clockwise" class="md-nav__link">
    <span class="md-ellipsis">
      order_counter_clockwise()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#segmentation" class="md-nav__link">
    <span class="md-ellipsis">
      Segmentation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.segmentation.geojson_polygon_feature_to_kili_segmentation_annotation" class="md-nav__link">
    <span class="md-ellipsis">
      geojson_polygon_feature_to_kili_segmentation_annotation()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.segmentation.kili_segmentation_annotation_to_geojson_polygon_feature" class="md-nav__link">
    <span class="md-ellipsis">
      kili_segmentation_annotation_to_geojson_polygon_feature()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.segmentation.kili_segmentation_to_geojson_polygon" class="md-nav__link">
    <span class="md-ellipsis">
      kili_segmentation_to_geojson_polygon()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collection" class="md-nav__link">
    <span class="md-ellipsis">
      Collection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.collection.features_to_feature_collection" class="md-nav__link">
    <span class="md-ellipsis">
      features_to_feature_collection()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.collection.geojson_feature_collection_to_kili_json_response" class="md-nav__link">
    <span class="md-ellipsis">
      geojson_feature_collection_to_kili_json_response()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.collection.kili_json_response_to_feature_collection" class="md-nav__link">
    <span class="md-ellipsis">
      kili_json_response_to_feature_collection()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../label_parsing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Label Parsing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../llm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LLM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Notification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../organization/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Organization
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plugins/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../project_user/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project User
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../project_version/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Project Version
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tag/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tag
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Command Line Interface
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Command Line Interface
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/reference/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Reference
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/basic_project_setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Basic Project Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Importing Assets
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Importing Assets
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/importing_assets_and_metadata/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Importing Assets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/importing_video_assets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Video Assets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/importing_pdf_assets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PDF Assets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/import_text_assets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Rich Text Assets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/importing_multilayer_geosat_assets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Multi-Layer Geosatellite Assets
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Importing Labels
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Importing Labels
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/importing_labels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Importing Labels
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/ner_pre_annotations_openai/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenAI NER Pre-annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/ocr_pre_annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OCR Pre-annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/pixel_level_masks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Segmentation Pre-annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/inference_labels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Inference Labels
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/finetuning_dinov2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DINOv2 Classification Pre-annotations
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Converting Labels
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Converting Labels
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/medical_imaging/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DICOM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/tagtog_to_kili/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tagtog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/importing_coco/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    COCO
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/importing_pascalvoc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    PascalVOC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/geojson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GeoJSON
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/set_up_workflows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managing Workflows
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Exporting Project Data
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Exporting Project Data
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/export_a_kili_project/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Exporting a Project
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/label_parsing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parsing Labels
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/llm_project_setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    LLM Projects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9" >
        
          
          <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Setting Up Plugins
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            Setting Up Plugins
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/plugins_development/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developing Plugins
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/plugins_example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugin Example - Programmatic QA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/plugins_library/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugins Library
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/webhooks_example/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Webhooks
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_10" >
        
          
          <label class="md-nav__link" for="__nav_3_10" id="__nav_3_10_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Integrations
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_10">
            <span class="md-nav__icon md-icon"></span>
            Integrations
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/vertex_ai_automl_od/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Vertex AI AutoML
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#points" class="md-nav__link">
    <span class="md-ellipsis">
      Points
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Points">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.point.normalized_point_to_point" class="md-nav__link">
    <span class="md-ellipsis">
      normalized_point_to_point()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.point.point_to_normalized_point" class="md-nav__link">
    <span class="md-ellipsis">
      point_to_normalized_point()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bounding-boxes" class="md-nav__link">
    <span class="md-ellipsis">
      Bounding boxes
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bounding boxes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.bbox.bbox_points_to_normalized_vertices" class="md-nav__link">
    <span class="md-ellipsis">
      bbox_points_to_normalized_vertices()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.bbox.normalized_vertices_to_bbox_points" class="md-nav__link">
    <span class="md-ellipsis">
      normalized_vertices_to_bbox_points()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#polygon-and-segmentation-masks" class="md-nav__link">
    <span class="md-ellipsis">
      Polygon and segmentation masks
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Polygon and segmentation masks">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.image.mask_to_normalized_vertices" class="md-nav__link">
    <span class="md-ellipsis">
      mask_to_normalized_vertices()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.image.normalized_vertices_to_mask" class="md-nav__link">
    <span class="md-ellipsis">
      normalized_vertices_to_mask()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geojson" class="md-nav__link">
    <span class="md-ellipsis">
      GeoJson
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GeoJson">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#point" class="md-nav__link">
    <span class="md-ellipsis">
      Point
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.point.geojson_point_feature_to_kili_point_annotation" class="md-nav__link">
    <span class="md-ellipsis">
      geojson_point_feature_to_kili_point_annotation()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.point.kili_point_annotation_to_geojson_point_feature" class="md-nav__link">
    <span class="md-ellipsis">
      kili_point_annotation_to_geojson_point_feature()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.point.kili_point_to_geojson_point" class="md-nav__link">
    <span class="md-ellipsis">
      kili_point_to_geojson_point()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#line" class="md-nav__link">
    <span class="md-ellipsis">
      Line
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.line.geojson_linestring_feature_to_kili_line_annotation" class="md-nav__link">
    <span class="md-ellipsis">
      geojson_linestring_feature_to_kili_line_annotation()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.line.kili_line_annotation_to_geojson_linestring_feature" class="md-nav__link">
    <span class="md-ellipsis">
      kili_line_annotation_to_geojson_linestring_feature()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.line.kili_line_to_geojson_linestring" class="md-nav__link">
    <span class="md-ellipsis">
      kili_line_to_geojson_linestring()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bounding-box" class="md-nav__link">
    <span class="md-ellipsis">
      Bounding box
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.bbox.geojson_polygon_feature_to_kili_bbox_annotation" class="md-nav__link">
    <span class="md-ellipsis">
      geojson_polygon_feature_to_kili_bbox_annotation()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.bbox.kili_bbox_annotation_to_geojson_polygon_feature" class="md-nav__link">
    <span class="md-ellipsis">
      kili_bbox_annotation_to_geojson_polygon_feature()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.bbox.kili_bbox_to_geojson_polygon" class="md-nav__link">
    <span class="md-ellipsis">
      kili_bbox_to_geojson_polygon()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#polygon" class="md-nav__link">
    <span class="md-ellipsis">
      Polygon
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.polygon.geojson_polygon_feature_to_kili_polygon_annotation" class="md-nav__link">
    <span class="md-ellipsis">
      geojson_polygon_feature_to_kili_polygon_annotation()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.polygon.get_oriented_area" class="md-nav__link">
    <span class="md-ellipsis">
      get_oriented_area()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.polygon.kili_polygon_annotation_to_geojson_polygon_feature" class="md-nav__link">
    <span class="md-ellipsis">
      kili_polygon_annotation_to_geojson_polygon_feature()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.polygon.kili_polygon_to_geojson_polygon" class="md-nav__link">
    <span class="md-ellipsis">
      kili_polygon_to_geojson_polygon()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.polygon.order_counter_clockwise" class="md-nav__link">
    <span class="md-ellipsis">
      order_counter_clockwise()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#segmentation" class="md-nav__link">
    <span class="md-ellipsis">
      Segmentation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.segmentation.geojson_polygon_feature_to_kili_segmentation_annotation" class="md-nav__link">
    <span class="md-ellipsis">
      geojson_polygon_feature_to_kili_segmentation_annotation()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.segmentation.kili_segmentation_annotation_to_geojson_polygon_feature" class="md-nav__link">
    <span class="md-ellipsis">
      kili_segmentation_annotation_to_geojson_polygon_feature()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.segmentation.kili_segmentation_to_geojson_polygon" class="md-nav__link">
    <span class="md-ellipsis">
      kili_segmentation_to_geojson_polygon()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#collection" class="md-nav__link">
    <span class="md-ellipsis">
      Collection
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.collection.features_to_feature_collection" class="md-nav__link">
    <span class="md-ellipsis">
      features_to_feature_collection()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.collection.geojson_feature_collection_to_kili_json_response" class="md-nav__link">
    <span class="md-ellipsis">
      geojson_feature_collection_to_kili_json_response()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kili.utils.labels.geojson.collection.kili_json_response_to_feature_collection" class="md-nav__link">
    <span class="md-ellipsis">
      kili_json_response_to_feature_collection()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="label-utils-module">Label utils module</h1>
<p>The module <code>kili.utils.labels</code> provides a set of helpers to convert point, bounding box, polygon and segmentation labels.</p>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>In Kili json response format, a normalized vertex is a dictionary with keys <code>x</code> and <code>y</code> and values between <code>0</code> and <code>1</code>. The origin is always the top left corner of the image. The x-axis is horizontal and the y-axis is vertical with the y-axis pointing down. You can find more information about the Kili data format <a href="https://docs.kili-technology.com/docs/data-format">here</a>.</p>
</div>
<h2 id="points">Points</h2>
<p><code>kili.utils.labels.point</code></p>


  <div class="doc doc-object doc-module">


    <div class="doc doc-contents first">

      <p>Helpers to create point annotations.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.point.normalized_point_to_point" class="doc doc-heading">
<code class="highlight language-python"><span class="n">normalized_point_to_point</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">img_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">img_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">origin_location</span><span class="o">=</span><span class="s1">&#39;bottom_left&#39;</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a Kili normalized vertex to a 2D point.</p>
<p>It is the inverse of the method <code>point_to_normalized_point</code>.</p>
<p>A point is a dict with keys <code>"x"</code> and <code>"y"</code>, and corresponding values in pixels (<code>int</code> or <code>float</code>).</p>
<p>Conventions for the input point:</p>
<ul>
<li>The origin is the top left corner of the image.</li>
<li>x-axis is horizontal and goes from left to right.</li>
<li>y-axis is vertical and goes from top to bottom.</li>
</ul>
<p>Conventions for the output point:</p>
<ul>
<li>The origin is defined by the <code>origin_location</code> argument.</li>
<li>x-axis is horizontal and goes from left to right.</li>
<li>y-axis is vertical. If <code>origin_location</code> is <code>"top_left"</code>, it goes from top to bottom. If <code>origin_location</code> is <code>"bottom_left"</code>, it goes from bottom to top.</li>
</ul>
<p>If the image width and height are provided, the output point coordinates will be scaled to the image size.
If not, the method will return a point with normalized coordinates.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>point</code></td>
        <td><code>Dict[str, float]</code></td>
        <td><p>Point to convert.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>img_width</code></td>
        <td><code>Union[int, float]</code></td>
        <td><p>Width of the image the point is defined in.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>img_height</code></td>
        <td><code>Union[int, float]</code></td>
        <td><p>Height of the image the point is defined in.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>origin_location</code></td>
        <td><code>Literal[&#39;top_left&#39;, &#39;bottom_left&#39;]</code></td>
        <td><p>Location of the origin of output point coordinate system. Can be either <code>top_left</code> or <code>bottom_left</code>.</p></td>
        <td><code>&#39;bottom_left&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[Literal[&#39;x&#39;, &#39;y&#39;], float]</code></td>
      <td><p>A dict with keys <code>"x"</code> and <code>"y"</code>, and corresponding values in pixels.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/point.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">normalized_point_to_point</span><span class="p">(</span>
    <span class="n">point</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">],</span>
    <span class="n">img_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">img_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">origin_location</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;top_left&quot;</span><span class="p">,</span> <span class="s2">&quot;bottom_left&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bottom_left&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="nb">float</span><span class="p">]:</span>
    <span class="c1"># pylint: disable=line-too-long</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a Kili normalized vertex to a 2D point.</span>

<span class="sd">    It is the inverse of the method `point_to_normalized_point`.</span>

<span class="sd">    A point is a dict with keys `&quot;x&quot;` and `&quot;y&quot;`, and corresponding values in pixels (`int` or `float`).</span>

<span class="sd">    Conventions for the input point:</span>

<span class="sd">    - The origin is the top left corner of the image.</span>
<span class="sd">    - x-axis is horizontal and goes from left to right.</span>
<span class="sd">    - y-axis is vertical and goes from top to bottom.</span>

<span class="sd">    Conventions for the output point:</span>

<span class="sd">    - The origin is defined by the `origin_location` argument.</span>
<span class="sd">    - x-axis is horizontal and goes from left to right.</span>
<span class="sd">    - y-axis is vertical. If `origin_location` is `&quot;top_left&quot;`, it goes from top to bottom. If `origin_location` is `&quot;bottom_left&quot;`, it goes from bottom to top.</span>

<span class="sd">    If the image width and height are provided, the output point coordinates will be scaled to the image size.</span>
<span class="sd">    If not, the method will return a point with normalized coordinates.</span>

<span class="sd">    Args:</span>
<span class="sd">        point: Point to convert.</span>
<span class="sd">        img_width: Width of the image the point is defined in.</span>
<span class="sd">        img_height: Height of the image the point is defined in.</span>
<span class="sd">        origin_location: Location of the origin of output point coordinate system. Can be either `top_left` or `bottom_left`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dict with keys `&quot;x&quot;` and `&quot;y&quot;`, and corresponding values in pixels.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">img_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="o">!=</span> <span class="p">(</span><span class="n">img_height</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;img_width and img_height must be both None or both not None.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">origin_location</span> <span class="o">==</span> <span class="s2">&quot;bottom_left&quot;</span><span class="p">:</span>
        <span class="n">point</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]}</span>

    <span class="n">img_height</span> <span class="o">=</span> <span class="n">img_height</span> <span class="ow">or</span> <span class="mi">1</span>
    <span class="n">img_width</span> <span class="o">=</span> <span class="n">img_width</span> <span class="ow">or</span> <span class="mi">1</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">img_width</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">img_height</span><span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.point.point_to_normalized_point" class="doc doc-heading">
<code class="highlight language-python"><span class="n">point_to_normalized_point</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">img_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">img_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">origin_location</span><span class="o">=</span><span class="s1">&#39;bottom_left&#39;</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Converts a 2D point to a Kili normalized vertex.</p>
<p>The output can be used to create object detection annotations. See the <a href="https://docs.kili-technology.com/reference/export-object-entity-detection-and-relation">documentation</a> for more details.</p>
<p>A point is a dict with keys <code>"x"</code> and <code>"y"</code>, and corresponding values in pixels (<code>int</code> or <code>float</code>).</p>
<p>Conventions for the input point:</p>
<ul>
<li>The origin is defined by the <code>origin_location</code> argument.</li>
<li>x-axis is horizontal and goes from left to right.</li>
<li>y-axis is vertical. If <code>origin_location</code> is <code>"top_left"</code>, it goes from top to bottom. If <code>origin_location</code> is <code>"bottom_left"</code>, it goes from bottom to top.</li>
</ul>
<p>Conventions for the output point:</p>
<ul>
<li>The origin is the top left corner of the image.</li>
<li>x-axis is horizontal and goes from left to right.</li>
<li>y-axis is vertical and goes from top to bottom.</li>
</ul>
<p>If the image width and height are provided, the input point coordinates will be normalized to <code>[0, 1]</code>.
If not, the method expects the input point coordinates to be already normalized.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>point</code></td>
        <td><code>Dict[str, Union[int, float]]</code></td>
        <td><p>Point to convert.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>img_width</code></td>
        <td><code>Union[int, float]</code></td>
        <td><p>Width of the image the point is defined in.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>img_height</code></td>
        <td><code>Union[int, float]</code></td>
        <td><p>Height of the image the point is defined in.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>origin_location</code></td>
        <td><code>Literal[&#39;top_left&#39;, &#39;bottom_left&#39;]</code></td>
        <td><p>Location of the origin of input point coordinate system. Can be either <code>top_left</code> or <code>bottom_left</code>.</p></td>
        <td><code>&#39;bottom_left&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[Literal[&#39;x&#39;, &#39;y&#39;], float]</code></td>
      <td><p>A dict with keys <code>"x"</code> and <code>"y"</code>, and corresponding normalized values.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">kili.utils.labels.point</span> <span class="kn">import</span> <span class="n">point_to_normalized_point</span>

<span class="n">normalized_point</span> <span class="o">=</span> <span class="n">point_to_normalized_point</span><span class="p">({</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">5</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">40</span><span class="p">},</span> <span class="n">img_width</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">img_height</span><span class="o">=</span><span class="mi">100</span><span class="p">)</span>

<span class="n">json_response</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;OBJECT_DETECTION_JOB&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;annotations&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;point&quot;</span><span class="p">:</span> <span class="n">normalized_point</span><span class="p">,</span>
                <span class="s2">&quot;categories&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;CLASS_A&quot;</span><span class="p">}],</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;marker&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/point.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">point_to_normalized_point</span><span class="p">(</span>
    <span class="n">point</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span>
    <span class="n">img_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">img_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">origin_location</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;top_left&quot;</span><span class="p">,</span> <span class="s2">&quot;bottom_left&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bottom_left&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="nb">float</span><span class="p">]:</span>
    <span class="c1"># pylint: disable=line-too-long</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts a 2D point to a Kili normalized vertex.</span>

<span class="sd">    The output can be used to create object detection annotations. See the [documentation](https://docs.kili-technology.com/reference/export-object-entity-detection-and-relation) for more details.</span>

<span class="sd">    A point is a dict with keys `&quot;x&quot;` and `&quot;y&quot;`, and corresponding values in pixels (`int` or `float`).</span>

<span class="sd">    Conventions for the input point:</span>

<span class="sd">    - The origin is defined by the `origin_location` argument.</span>
<span class="sd">    - x-axis is horizontal and goes from left to right.</span>
<span class="sd">    - y-axis is vertical. If `origin_location` is `&quot;top_left&quot;`, it goes from top to bottom. If `origin_location` is `&quot;bottom_left&quot;`, it goes from bottom to top.</span>

<span class="sd">    Conventions for the output point:</span>

<span class="sd">    - The origin is the top left corner of the image.</span>
<span class="sd">    - x-axis is horizontal and goes from left to right.</span>
<span class="sd">    - y-axis is vertical and goes from top to bottom.</span>

<span class="sd">    If the image width and height are provided, the input point coordinates will be normalized to `[0, 1]`.</span>
<span class="sd">    If not, the method expects the input point coordinates to be already normalized.</span>

<span class="sd">    Args:</span>
<span class="sd">        point: Point to convert.</span>
<span class="sd">        img_width: Width of the image the point is defined in.</span>
<span class="sd">        img_height: Height of the image the point is defined in.</span>
<span class="sd">        origin_location: Location of the origin of input point coordinate system. Can be either `top_left` or `bottom_left`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dict with keys `&quot;x&quot;` and `&quot;y&quot;`, and corresponding normalized values.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        from kili.utils.labels.point import point_to_normalized_point</span>

<span class="sd">        normalized_point = point_to_normalized_point({&quot;x&quot;: 5, &quot;y&quot;: 40}, img_width=100, img_height=100)</span>

<span class="sd">        json_response = {</span>
<span class="sd">            &quot;OBJECT_DETECTION_JOB&quot;: {</span>
<span class="sd">                &quot;annotations&quot;: [</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;point&quot;: normalized_point,</span>
<span class="sd">                        &quot;categories&quot;: [{&quot;name&quot;: &quot;CLASS_A&quot;}],</span>
<span class="sd">                        &quot;type&quot;: &quot;marker&quot;,</span>
<span class="sd">                    }</span>
<span class="sd">                ]</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">img_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="o">!=</span> <span class="p">(</span><span class="n">img_height</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;img_width and img_height must be both None or both not None.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">img_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">img_height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">point</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">img_width</span><span class="p">,</span>
            <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">/</span> <span class="n">img_height</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="k">if</span> <span class="n">origin_location</span> <span class="o">==</span> <span class="s2">&quot;bottom_left&quot;</span><span class="p">:</span>
        <span class="n">point</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]}</span>

    <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Point x coordinate </span><span class="si">{</span><span class="n">point</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> should be in [0, 1].&quot;</span>
    <span class="k">assert</span> <span class="mi">0</span> <span class="o">&lt;=</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="mi">1</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Point y coordinate </span><span class="si">{</span><span class="n">point</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> should be in [0, 1].&quot;</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]}</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>

<h2 id="bounding-boxes">Bounding boxes</h2>
<p><code>kili.utils.labels.bbox</code></p>


  <div class="doc doc-object doc-module">


    <div class="doc doc-contents first">

      <p>Helpers to create boundingPoly rectangle annotations.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.bbox.bbox_points_to_normalized_vertices" class="doc doc-heading">
<code class="highlight language-python"><span class="n">bbox_points_to_normalized_vertices</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">bottom_left</span><span class="p">,</span> <span class="n">bottom_right</span><span class="p">,</span> <span class="n">top_right</span><span class="p">,</span> <span class="n">top_left</span><span class="p">,</span> <span class="n">img_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">img_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">origin_location</span><span class="o">=</span><span class="s1">&#39;bottom_left&#39;</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Converts a bounding box defined by its 4 points to normalized vertices.</p>
<p>The output can be used to create a boundingPoly rectangle annotation. See the <a href="https://docs.kili-technology.com/reference/export-object-entity-detection-and-relation#standard-object-detection">documentation</a> for more details.</p>
<p>A point is a dict with keys <code>"x"</code> and <code>"y"</code>, and corresponding values in pixels (<code>int</code> or <code>float</code>).</p>
<p>Conventions for the input points:</p>
<ul>
<li>The origin is defined by the <code>origin_location</code> argument.</li>
<li>x-axis is horizontal and goes from left to right.</li>
<li>y-axis is vertical. If <code>origin_location</code> is <code>"top_left"</code>, it goes from top to bottom. If <code>origin_location</code> is <code>"bottom_left"</code>, it goes from bottom to top.</li>
</ul>
<p>Conventions for the output vertices:</p>
<ul>
<li>The origin is the top left corner of the image.</li>
<li>x-axis is horizontal and goes from left to right.</li>
<li>y-axis is vertical and goes from top to bottom.</li>
</ul>
<p>If the image width and height are provided, the input point coordinates will be normalized to <code>[0, 1]</code>.
If not, the method expects the input points' coordinates to be already normalized.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>bottom_left</code></td>
        <td><code>Dict[str, Union[int, float]]</code></td>
        <td><p>Bottom left point of the bounding box.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>bottom_right</code></td>
        <td><code>Dict[str, Union[int, float]]</code></td>
        <td><p>Bottom right point of the bounding box.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>top_right</code></td>
        <td><code>Dict[str, Union[int, float]]</code></td>
        <td><p>Top right point of the bounding box.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>top_left</code></td>
        <td><code>Dict[str, Union[int, float]]</code></td>
        <td><p>Top left point of the bounding box.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>img_width</code></td>
        <td><code>Union[int, float]</code></td>
        <td><p>Width of the image the bounding box is defined in.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>img_height</code></td>
        <td><code>Union[int, float]</code></td>
        <td><p>Height of the image the bounding box is defined in.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>origin_location</code></td>
        <td><code>Literal[&#39;top_left&#39;, &#39;bottom_left&#39;]</code></td>
        <td><p>Location of the origin of input point coordinate system. Can be either <code>top_left</code> or <code>bottom_left</code>.</p></td>
        <td><code>&#39;bottom_left&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[Dict[Literal[&#39;x&#39;, &#39;y&#39;], float]]</code></td>
      <td><p>A list of normalized vertices.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">kili.utils.labels.bbox</span> <span class="kn">import</span> <span class="n">bbox_points_to_normalized_vertices</span>

<span class="n">inputs</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">bottom_left</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
    <span class="n">bottom_right</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">},</span>
    <span class="n">top_right</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
    <span class="n">top_left</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mi">10</span><span class="p">},</span>
    <span class="n">img_width</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
    <span class="n">img_height</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span>
<span class="p">}</span>
<span class="n">normalized_vertices</span> <span class="o">=</span> <span class="n">bbox_points_to_normalized_vertices</span><span class="p">(</span><span class="o">**</span><span class="n">inputs</span><span class="p">)</span>
<span class="n">json_response</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;OBJECT_DETECTION_JOB&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;annotations&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;boundingPoly&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;normalizedVertices&quot;</span><span class="p">:</span> <span class="n">normalized_vertices</span><span class="p">}],</span>
                <span class="s2">&quot;categories&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;CLASS_A&quot;</span><span class="p">}],</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/bbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">bbox_points_to_normalized_vertices</span><span class="p">(</span>
    <span class="o">*</span><span class="p">,</span>
    <span class="n">bottom_left</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span>
    <span class="n">bottom_right</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span>
    <span class="n">top_right</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span>
    <span class="n">top_left</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span>
    <span class="n">img_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">img_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">origin_location</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;top_left&quot;</span><span class="p">,</span> <span class="s2">&quot;bottom_left&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bottom_left&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="nb">float</span><span class="p">]]:</span>
    <span class="c1"># pylint: disable=line-too-long</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts a bounding box defined by its 4 points to normalized vertices.</span>

<span class="sd">    The output can be used to create a boundingPoly rectangle annotation. See the [documentation](https://docs.kili-technology.com/reference/export-object-entity-detection-and-relation#standard-object-detection) for more details.</span>

<span class="sd">    A point is a dict with keys `&quot;x&quot;` and `&quot;y&quot;`, and corresponding values in pixels (`int` or `float`).</span>

<span class="sd">    Conventions for the input points:</span>

<span class="sd">    - The origin is defined by the `origin_location` argument.</span>
<span class="sd">    - x-axis is horizontal and goes from left to right.</span>
<span class="sd">    - y-axis is vertical. If `origin_location` is `&quot;top_left&quot;`, it goes from top to bottom. If `origin_location` is `&quot;bottom_left&quot;`, it goes from bottom to top.</span>

<span class="sd">    Conventions for the output vertices:</span>

<span class="sd">    - The origin is the top left corner of the image.</span>
<span class="sd">    - x-axis is horizontal and goes from left to right.</span>
<span class="sd">    - y-axis is vertical and goes from top to bottom.</span>

<span class="sd">    If the image width and height are provided, the input point coordinates will be normalized to `[0, 1]`.</span>
<span class="sd">    If not, the method expects the input points&#39; coordinates to be already normalized.</span>

<span class="sd">    Args:</span>
<span class="sd">        bottom_left: Bottom left point of the bounding box.</span>
<span class="sd">        bottom_right: Bottom right point of the bounding box.</span>
<span class="sd">        top_right: Top right point of the bounding box.</span>
<span class="sd">        top_left: Top left point of the bounding box.</span>
<span class="sd">        img_width: Width of the image the bounding box is defined in.</span>
<span class="sd">        img_height: Height of the image the bounding box is defined in.</span>
<span class="sd">        origin_location: Location of the origin of input point coordinate system. Can be either `top_left` or `bottom_left`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A list of normalized vertices.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        from kili.utils.labels.bbox import bbox_points_to_normalized_vertices</span>

<span class="sd">        inputs = {</span>
<span class="sd">            bottom_left = {&quot;x&quot;: 0, &quot;y&quot;: 0},</span>
<span class="sd">            bottom_right = {&quot;x&quot;: 10, &quot;y&quot;: 0},</span>
<span class="sd">            top_right = {&quot;x&quot;: 10, &quot;y&quot;: 10},</span>
<span class="sd">            top_left = {&quot;x&quot;: 0, &quot;y&quot;: 10},</span>
<span class="sd">            img_width = 100,</span>
<span class="sd">            img_height = 100,</span>
<span class="sd">        }</span>
<span class="sd">        normalized_vertices = bbox_points_to_normalized_vertices(**inputs)</span>
<span class="sd">        json_response = {</span>
<span class="sd">            &quot;OBJECT_DETECTION_JOB&quot;: {</span>
<span class="sd">                &quot;annotations&quot;: [</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;boundingPoly&quot;: [{&quot;normalizedVertices&quot;: normalized_vertices}],</span>
<span class="sd">                        &quot;categories&quot;: [{&quot;name&quot;: &quot;CLASS_A&quot;}],</span>
<span class="sd">                        &quot;type&quot;: &quot;rectangle&quot;,</span>
<span class="sd">                    }</span>
<span class="sd">                ]</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">bottom_left</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">bottom_right</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="s2">&quot;bottom_left.x must be &lt;= bottom_right.x&quot;</span>
    <span class="k">assert</span> <span class="n">top_left</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">top_right</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="s2">&quot;top_left.x must be &lt;= top_right.x&quot;</span>
    <span class="k">if</span> <span class="n">origin_location</span> <span class="o">==</span> <span class="s2">&quot;bottom_left&quot;</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">bottom_left</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">top_left</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="s2">&quot;bottom_left.y must be &lt;= top_left.y&quot;</span>
        <span class="k">assert</span> <span class="n">bottom_right</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">&lt;=</span> <span class="n">top_right</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="s2">&quot;bottom_right.y must be &lt;= top_right.y&quot;</span>
    <span class="k">elif</span> <span class="n">origin_location</span> <span class="o">==</span> <span class="s2">&quot;top_left&quot;</span><span class="p">:</span>
        <span class="k">assert</span> <span class="n">bottom_left</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">top_left</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="s2">&quot;bottom_left.y must be &gt;= top_left.y&quot;</span>
        <span class="k">assert</span> <span class="n">bottom_right</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">&gt;=</span> <span class="n">top_right</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="s2">&quot;bottom_right.y must be &gt;= top_right.y&quot;</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">img_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="o">!=</span> <span class="p">(</span><span class="n">img_height</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;img_width and img_height must be both None or both not None.&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="p">[</span>
        <span class="n">point_to_normalized_point</span><span class="p">(</span>
            <span class="n">point</span><span class="p">,</span> <span class="n">img_width</span><span class="o">=</span><span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span><span class="o">=</span><span class="n">img_height</span><span class="p">,</span> <span class="n">origin_location</span><span class="o">=</span><span class="n">origin_location</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="p">(</span><span class="n">bottom_left</span><span class="p">,</span> <span class="n">top_left</span><span class="p">,</span> <span class="n">top_right</span><span class="p">,</span> <span class="n">bottom_right</span><span class="p">)</span>
    <span class="p">]</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.bbox.normalized_vertices_to_bbox_points" class="doc doc-heading">
<code class="highlight language-python"><span class="n">normalized_vertices_to_bbox_points</span><span class="p">(</span><span class="n">normalized_vertices</span><span class="p">,</span> <span class="n">img_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">img_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">origin_location</span><span class="o">=</span><span class="s1">&#39;bottom_left&#39;</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Converts a rectangle normalizedVertices annotation to a bounding box defined by 4 points.</p>
<p>It is the inverse of the method <code>bbox_points_to_normalized_vertices</code>.</p>
<p>A point is a dict with keys <code>"x"</code> and <code>"y"</code>, and corresponding values in pixels (<code>int</code> or <code>float</code>).</p>
<p>Conventions for the input vertices:</p>
<ul>
<li>The origin is the top left corner of the image.</li>
<li>x-axis is horizontal and goes from left to right.</li>
<li>y-axis is vertical and goes from top to bottom.</li>
</ul>
<p>Conventions for the output points (<code>top_left</code>, <code>bottom_left</code>, <code>bottom_right</code>, <code>top_right</code>):</p>
<ul>
<li>The origin is defined by the <code>origin_location</code> argument.</li>
<li>x-axis is horizontal and goes from left to right.</li>
<li>y-axis is vertical. If <code>origin_location</code> is <code>"top_left"</code>, it goes from top to bottom. If <code>origin_location</code> is <code>"bottom_left"</code>, it goes from bottom to top.</li>
</ul>
<p>If the image width and height are provided, the output point coordinates will be scaled to the image size.
If not, the method will return the output points' coordinates normalized to <code>[0, 1]</code>.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>normalized_vertices</code></td>
        <td><code>List[Dict[str, float]]</code></td>
        <td><p>A list of normalized vertices.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>img_width</code></td>
        <td><code>Union[int, float]</code></td>
        <td><p>Width of the image the bounding box is defined in.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>img_height</code></td>
        <td><code>Union[int, float]</code></td>
        <td><p>Height of the image the bounding box is defined in.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>origin_location</code></td>
        <td><code>Literal[&#39;top_left&#39;, &#39;bottom_left&#39;]</code></td>
        <td><p>Location of the origin of output point coordinate system. Can be either <code>top_left</code> or <code>bottom_left</code>.</p></td>
        <td><code>&#39;bottom_left&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[Literal[&#39;top_left&#39;, &#39;bottom_left&#39;, &#39;bottom_right&#39;, &#39;top_right&#39;], Dict[Literal[&#39;x&#39;, &#39;y&#39;], float]]</code></td>
      <td><p>A dict with keys <code>"top_left"</code>, <code>"bottom_left"</code>, <code>"bottom_right"</code>, <code>"top_right"</code>, and corresponding points.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">kili.utils.labels.bbox</span> <span class="kn">import</span> <span class="n">normalized_vertices_to_bbox_points</span>

<span class="c1"># if using raw dict label:</span>
<span class="n">normalized_vertices</span> <span class="o">=</span> <span class="n">label</span><span class="p">[</span><span class="s2">&quot;jsonResponse&quot;</span><span class="p">][</span><span class="s2">&quot;OBJECT_DETECTION_JOB&quot;</span><span class="p">][</span><span class="s2">&quot;annotations&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;boundingPoly&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;normalizedVertices&quot;</span><span class="p">]</span>

<span class="c1"># if using parsed label:</span>
<span class="n">normalized_vertices</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">jobs</span><span class="p">[</span><span class="s2">&quot;OBJECT_DETECTION_JOB&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">annotations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">bounding_poly</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">normalized_vertices</span>

<span class="n">img_height</span><span class="p">,</span> <span class="n">img_width</span> <span class="o">=</span> <span class="mi">1080</span><span class="p">,</span> <span class="mi">1920</span>
<span class="n">bbox_points</span> <span class="o">=</span> <span class="n">normalized_vertices_to_bbox_points</span><span class="p">(</span><span class="n">normalized_vertices</span><span class="p">,</span> <span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span><span class="p">)</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/bbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">normalized_vertices_to_bbox_points</span><span class="p">(</span>
    <span class="n">normalized_vertices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span>
    <span class="n">img_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">img_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">origin_location</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;top_left&quot;</span><span class="p">,</span> <span class="s2">&quot;bottom_left&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;bottom_left&quot;</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span>
    <span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;top_left&quot;</span><span class="p">,</span> <span class="s2">&quot;bottom_left&quot;</span><span class="p">,</span> <span class="s2">&quot;bottom_right&quot;</span><span class="p">,</span> <span class="s2">&quot;top_right&quot;</span><span class="p">],</span> <span class="n">Dict</span><span class="p">[</span><span class="n">Literal</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="nb">float</span><span class="p">]</span>
<span class="p">]:</span>
    <span class="c1"># pylint: disable=line-too-long</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts a rectangle normalizedVertices annotation to a bounding box defined by 4 points.</span>

<span class="sd">    It is the inverse of the method `bbox_points_to_normalized_vertices`.</span>

<span class="sd">    A point is a dict with keys `&quot;x&quot;` and `&quot;y&quot;`, and corresponding values in pixels (`int` or `float`).</span>

<span class="sd">    Conventions for the input vertices:</span>

<span class="sd">    - The origin is the top left corner of the image.</span>
<span class="sd">    - x-axis is horizontal and goes from left to right.</span>
<span class="sd">    - y-axis is vertical and goes from top to bottom.</span>

<span class="sd">    Conventions for the output points (`top_left`, `bottom_left`, `bottom_right`, `top_right`):</span>

<span class="sd">    - The origin is defined by the `origin_location` argument.</span>
<span class="sd">    - x-axis is horizontal and goes from left to right.</span>
<span class="sd">    - y-axis is vertical. If `origin_location` is `&quot;top_left&quot;`, it goes from top to bottom. If `origin_location` is `&quot;bottom_left&quot;`, it goes from bottom to top.</span>

<span class="sd">    If the image width and height are provided, the output point coordinates will be scaled to the image size.</span>
<span class="sd">    If not, the method will return the output points&#39; coordinates normalized to `[0, 1]`.</span>

<span class="sd">    Args:</span>
<span class="sd">        normalized_vertices: A list of normalized vertices.</span>
<span class="sd">        img_width: Width of the image the bounding box is defined in.</span>
<span class="sd">        img_height: Height of the image the bounding box is defined in.</span>
<span class="sd">        origin_location: Location of the origin of output point coordinate system. Can be either `top_left` or `bottom_left`.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dict with keys `&quot;top_left&quot;`, `&quot;bottom_left&quot;`, `&quot;bottom_right&quot;`, `&quot;top_right&quot;`, and corresponding points.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        from kili.utils.labels.bbox import normalized_vertices_to_bbox_points</span>

<span class="sd">        # if using raw dict label:</span>
<span class="sd">        normalized_vertices = label[&quot;jsonResponse&quot;][&quot;OBJECT_DETECTION_JOB&quot;][&quot;annotations&quot;][0][&quot;boundingPoly&quot;][0][&quot;normalizedVertices&quot;]</span>

<span class="sd">        # if using parsed label:</span>
<span class="sd">        normalized_vertices = label.jobs[&quot;OBJECT_DETECTION_JOB&quot;].annotations[0].bounding_poly[0].normalized_vertices</span>

<span class="sd">        img_height, img_width = 1080, 1920</span>
<span class="sd">        bbox_points = normalized_vertices_to_bbox_points(normalized_vertices, img_width, img_height)</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">normalized_vertices</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">4</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;normalized_vertices must have length 4. Got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">normalized_vertices</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">img_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="o">!=</span> <span class="p">(</span><span class="n">img_height</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;img_width and img_height must be both None or both not None.&quot;</span><span class="p">)</span>

    <span class="n">img_height</span> <span class="o">=</span> <span class="n">img_height</span> <span class="ow">or</span> <span class="mi">1</span>
    <span class="n">img_width</span> <span class="o">=</span> <span class="n">img_width</span> <span class="ow">or</span> <span class="mi">1</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">vertex</span><span class="p">,</span> <span class="n">point_name</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
        <span class="n">normalized_vertices</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;bottom_left&quot;</span><span class="p">,</span> <span class="s2">&quot;top_left&quot;</span><span class="p">,</span> <span class="s2">&quot;top_right&quot;</span><span class="p">,</span> <span class="s2">&quot;bottom_right&quot;</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">ret</span><span class="p">[</span><span class="n">point_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">normalized_point_to_point</span><span class="p">(</span>
            <span class="n">vertex</span><span class="p">,</span> <span class="n">img_width</span><span class="o">=</span><span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span><span class="o">=</span><span class="n">img_height</span><span class="p">,</span> <span class="n">origin_location</span><span class="o">=</span><span class="n">origin_location</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>

<h2 id="polygon-and-segmentation-masks">Polygon and segmentation masks</h2>
<p><code>kili.utils.labels.image</code></p>
<div class="admonition info">
<p class="admonition-title">OpenCV</p>
<p>It is recommended to install the image dependencies to use the image helpers.</p>
<div class="highlight"><pre><span></span><code>pip<span class="w"> </span>install<span class="w"> </span>kili<span class="o">[</span>image-utils<span class="o">]</span>
</code></pre></div>
</div>


  <div class="doc doc-object doc-module">


    <div class="doc doc-contents first">

      <p>Helpers to create boundingPoly polygon and semantic annotations.</p>



  <div class="doc doc-children">









  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.image.mask_to_normalized_vertices" class="doc doc-heading">
<code class="highlight language-python"><span class="n">mask_to_normalized_vertices</span><span class="p">(</span><span class="n">image</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Converts a binary mask to a list of normalized vertices using OpenCV <a href="https://docs.opencv.org/4.7.0/d3/dc0/group__imgproc__shape.html#gadf1ad6a0b82947fa1fe3c3d497f260e0">cv2.findContours</a>.</p>
<p>The output can be used to create "boundingPoly" polygon or semantic annotations.
See the <a href="https://docs.kili-technology.com/reference/export-object-entity-detection-and-relation#standard-object-detection">documentation</a> for more details.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td><code>ndarray</code></td>
        <td><p>Binary mask. Should be an array of shape (height, width) with values in {0, 255}.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Tuple</code></td>
      <td><p>A tuple containing a list of normalized vertices and the hierarchy of the contours (see <a href="https://docs.opencv.org/4.7.0/d9/d8b/tutorial_py_contours_hierarchy.html">OpenCV documentation</a>).</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">urllib.request</span>
<span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">from</span> <span class="nn">kili.utils.labels.image</span> <span class="kn">import</span> <span class="n">mask_to_normalized_vertices</span>

<span class="n">mask_url</span> <span class="o">=</span> <span class="s2">&quot;https://raw.githubusercontent.com/kili-technology/kili-python-sdk/main/recipes/img/HUMAN.mask.png&quot;</span>
<span class="n">urllib</span><span class="o">.</span><span class="n">request</span><span class="o">.</span><span class="n">urlretrieve</span><span class="p">(</span><span class="n">mask_url</span><span class="p">,</span> <span class="s2">&quot;mask.png&quot;</span><span class="p">)</span>

<span class="n">img</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">imread</span><span class="p">(</span><span class="s2">&quot;mask.png&quot;</span><span class="p">)[:,</span> <span class="p">:,</span> <span class="mi">0</span><span class="p">]</span>  <span class="c1"># keep only height and width</span>
<span class="n">img</span><span class="p">[</span><span class="mi">200</span><span class="p">:</span><span class="mi">220</span><span class="p">,</span> <span class="mi">200</span><span class="p">:</span><span class="mi">220</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># add a hole in the mask to test the hierarchy</span>

<span class="n">contours</span><span class="p">,</span> <span class="n">hierarchy</span> <span class="o">=</span> <span class="n">mask_to_normalized_vertices</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
<span class="c1"># hierarchy tells us that the first contour is the outer contour</span>
<span class="c1"># and the second one is the inner contour</span>

<span class="n">json_response</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;OBJECT_DETECTION_JOB&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;annotations&quot;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s2">&quot;boundingPoly&quot;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s2">&quot;normalizedVertices&quot;</span><span class="p">:</span> <span class="n">contours</span><span class="p">[</span><span class="mi">0</span><span class="p">]},</span>  <span class="c1"># outer contour</span>
                    <span class="p">{</span><span class="s2">&quot;normalizedVertices&quot;</span><span class="p">:</span> <span class="n">contours</span><span class="p">[</span><span class="mi">1</span><span class="p">]},</span>  <span class="c1"># inner contour</span>
                <span class="p">],</span>
                <span class="s2">&quot;categories&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;A&quot;</span><span class="p">}],</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;semantic&quot;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/image.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">mask_to_normalized_vertices</span><span class="p">(</span>
    <span class="n">image</span><span class="p">:</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]],</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">]:</span>
    <span class="c1"># pylint: disable=line-too-long</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts a binary mask to a list of normalized vertices using OpenCV [cv2.findContours](https://docs.opencv.org/4.7.0/d3/dc0/group__imgproc__shape.html#gadf1ad6a0b82947fa1fe3c3d497f260e0).</span>

<span class="sd">    The output can be used to create &quot;boundingPoly&quot; polygon or semantic annotations.</span>
<span class="sd">    See the [documentation](https://docs.kili-technology.com/reference/export-object-entity-detection-and-relation#standard-object-detection) for more details.</span>

<span class="sd">    Args:</span>
<span class="sd">        image: Binary mask. Should be an array of shape (height, width) with values in {0, 255}.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple: A tuple containing a list of normalized vertices and the hierarchy of the contours (see [OpenCV documentation](https://docs.opencv.org/4.7.0/d9/d8b/tutorial_py_contours_hierarchy.html)).</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        import urllib.request</span>
<span class="sd">        import cv2</span>
<span class="sd">        from kili.utils.labels.image import mask_to_normalized_vertices</span>

<span class="sd">        mask_url = &quot;https://raw.githubusercontent.com/kili-technology/kili-python-sdk/main/recipes/img/HUMAN.mask.png&quot;</span>
<span class="sd">        urllib.request.urlretrieve(mask_url, &quot;mask.png&quot;)</span>

<span class="sd">        img = cv2.imread(&quot;mask.png&quot;)[:, :, 0]  # keep only height and width</span>
<span class="sd">        img[200:220, 200:220] = 0  # add a hole in the mask to test the hierarchy</span>

<span class="sd">        contours, hierarchy = mask_to_normalized_vertices(img)</span>
<span class="sd">        # hierarchy tells us that the first contour is the outer contour</span>
<span class="sd">        # and the second one is the inner contour</span>

<span class="sd">        json_response = {</span>
<span class="sd">            &quot;OBJECT_DETECTION_JOB&quot;: {</span>
<span class="sd">                &quot;annotations&quot;: [</span>
<span class="sd">                    {</span>
<span class="sd">                        &quot;boundingPoly&quot;: [</span>
<span class="sd">                            {&quot;normalizedVertices&quot;: contours[0]},  # outer contour</span>
<span class="sd">                            {&quot;normalizedVertices&quot;: contours[1]},  # inner contour</span>
<span class="sd">                        ],</span>
<span class="sd">                        &quot;categories&quot;: [{&quot;name&quot;: &quot;A&quot;}],</span>
<span class="sd">                        &quot;type&quot;: &quot;semantic&quot;,</span>
<span class="sd">                    }</span>
<span class="sd">                ]</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">ndim</span> <span class="o">&gt;</span> <span class="mi">2</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Image should be a 2D array, got </span><span class="si">{</span><span class="n">image</span><span class="o">.</span><span class="n">ndim</span><span class="si">}</span><span class="s2">D array&quot;</span><span class="p">)</span>

    <span class="n">unique_values</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">unique</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">value</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">255</span><span class="p">]</span> <span class="k">for</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">unique_values</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Image should be binary with values in </span><span class="se">{{</span><span class="s2">0, 255</span><span class="se">}}</span><span class="s2">, got </span><span class="si">{</span><span class="n">unique_values</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="n">img_height</span><span class="p">,</span> <span class="n">img_width</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">shape</span>
    <span class="c1"># pylint:disable=no-member</span>
    <span class="n">contours</span><span class="p">,</span> <span class="n">hierarchy</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">findContours</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">RETR_TREE</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">CHAIN_APPROX_SIMPLE</span><span class="p">)</span>  <span class="c1"># type: ignore</span>

    <span class="n">contours</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">_opencv_contour_to_normalized_vertices</span><span class="p">(</span><span class="n">contour</span><span class="p">,</span> <span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">contour</span> <span class="ow">in</span> <span class="n">contours</span>
    <span class="p">]</span>
    <span class="n">hierarchy</span> <span class="o">=</span> <span class="n">hierarchy</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">contours</span><span class="p">,</span> <span class="n">hierarchy</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.image.normalized_vertices_to_mask" class="doc doc-heading">
<code class="highlight language-python"><span class="n">normalized_vertices_to_mask</span><span class="p">(</span><span class="n">normalized_vertices</span><span class="p">,</span> <span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Converts a Kili label with normalized vertices to a binary mask.</p>
<p>It is the inverse of the method <code>mask_to_normalized_vertices</code>.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>normalized_vertices</code></td>
        <td><code>List[Dict[str, float]]</code></td>
        <td><p>A list of normalized vertices.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>img_width</code></td>
        <td><code>int</code></td>
        <td><p>Width of the image the segmentation is defined in.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>img_height</code></td>
        <td><code>int</code></td>
        <td><p>Height of the image the segmentation is defined in.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ndarray</code></td>
      <td><p>A numpy array of shape (height, width) with values in {0, 255}.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">kili.utils.labels.image</span> <span class="kn">import</span> <span class="n">normalized_vertices_to_mask</span>

<span class="c1"># if using raw dict label:</span>
<span class="n">normalized_vertices</span> <span class="o">=</span> <span class="n">label</span><span class="p">[</span><span class="s2">&quot;jsonResponse&quot;</span><span class="p">][</span><span class="s2">&quot;OBJECT_DETECTION_JOB&quot;</span><span class="p">][</span><span class="s2">&quot;annotations&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;boundingPoly&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;normalizedVertices&quot;</span><span class="p">]</span>

<span class="c1"># if using parsed label:</span>
<span class="n">normalized_vertices</span> <span class="o">=</span> <span class="n">label</span><span class="o">.</span><span class="n">jobs</span><span class="p">[</span><span class="s2">&quot;OBJECT_DETECTION_JOB&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">annotations</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">bounding_poly</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">normalized_vertices</span>

<span class="n">img_height</span><span class="p">,</span> <span class="n">img_width</span> <span class="o">=</span> <span class="mi">1080</span><span class="p">,</span> <span class="mi">1920</span>
<span class="n">mask</span> <span class="o">=</span> <span class="n">normalized_vertices_to_mask</span><span class="p">(</span><span class="n">normalized_vertices</span><span class="p">,</span> <span class="n">img_width</span><span class="p">,</span> <span class="n">img_height</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/image.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">normalized_vertices_to_mask</span><span class="p">(</span>
    <span class="n">normalized_vertices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]],</span> <span class="n">img_width</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">img_height</span><span class="p">:</span> <span class="nb">int</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">:</span>
    <span class="c1"># pylint: disable=line-too-long</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts a Kili label with normalized vertices to a binary mask.</span>

<span class="sd">    It is the inverse of the method `mask_to_normalized_vertices`.</span>

<span class="sd">    Args:</span>
<span class="sd">        normalized_vertices: A list of normalized vertices.</span>
<span class="sd">        img_width: Width of the image the segmentation is defined in.</span>
<span class="sd">        img_height: Height of the image the segmentation is defined in.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A numpy array of shape (height, width) with values in {0, 255}.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        from kili.utils.labels.image import normalized_vertices_to_mask</span>

<span class="sd">        # if using raw dict label:</span>
<span class="sd">        normalized_vertices = label[&quot;jsonResponse&quot;][&quot;OBJECT_DETECTION_JOB&quot;][&quot;annotations&quot;][0][&quot;boundingPoly&quot;][0][&quot;normalizedVertices&quot;]</span>

<span class="sd">        # if using parsed label:</span>
<span class="sd">        normalized_vertices = label.jobs[&quot;OBJECT_DETECTION_JOB&quot;].annotations[0].bounding_poly[0].normalized_vertices</span>

<span class="sd">        img_height, img_width = 1080, 1920</span>
<span class="sd">        mask = normalized_vertices_to_mask(normalized_vertices, img_width, img_height)</span>
<span class="sd">        plt.imshow(mask)</span>
<span class="sd">        plt.show()</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">mask</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">zeros</span><span class="p">((</span><span class="n">img_height</span><span class="p">,</span> <span class="n">img_width</span><span class="p">),</span> <span class="n">dtype</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">uint8</span><span class="p">)</span>
    <span class="n">polygon</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span>
            <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">vertice</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">img_width</span><span class="p">)),</span>
            <span class="nb">int</span><span class="p">(</span><span class="nb">round</span><span class="p">(</span><span class="n">vertice</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">*</span> <span class="n">img_height</span><span class="p">)),</span>
        <span class="p">]</span>
        <span class="k">for</span> <span class="n">vertice</span> <span class="ow">in</span> <span class="n">normalized_vertices</span>
    <span class="p">]</span>
    <span class="n">polygon</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">polygon</span><span class="p">])</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">fillPoly</span><span class="p">(</span><span class="n">img</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span> <span class="n">pts</span><span class="o">=</span><span class="n">polygon</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="mi">255</span><span class="p">)</span>  <span class="c1"># type: ignore  # pylint:disable=no-member</span>
    <span class="k">return</span> <span class="n">mask</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>

<h2 id="geojson">GeoJson</h2>
<div class="admonition info geospatial imagery">
<p class="admonition-title">Info</p>
<p>Label coordinates of GeoTIFF files (with geospatial metadata) are expressed in latitude and longitude where <code>x</code> stands for longitude and <code>y</code> for latitude.</p>
<p>Read more about Kili labeling features for geospatial imagery <a href="https://docs.kili-technology.com/docs/geospatialtiled-imagery">here</a>.</p>
</div>
<div class="admonition warning geospatial imagery">
<p class="admonition-title">Warning</p>
<p>If the geotiff image asset does not have geospatial metadata, the coordinates will be expressed in normalized coordinates, and the export to GeoJSON will not be accurate since the geospatial information is missing.</p>
<p>To check if your image asset has geospatial metadata, you can use the following code snippet:</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">asset</span> <span class="o">=</span> <span class="n">kili</span><span class="o">.</span><span class="n">assets</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">fields</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;jsonContent&quot;</span><span class="p">])[</span><span class="mi">0</span><span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="nb">print</span><span class="p">(</span><span class="n">asset</span><span class="p">[</span><span class="s1">&#39;jsonContent&#39;</span><span class="p">])</span>

<span class="c1"># asset without geospatial metadata</span>
<span class="p">[{</span><span class="s2">&quot;imageUrl&quot;</span><span class="p">:</span> <span class="s2">&quot;https://...&quot;</span><span class="p">,</span> <span class="s2">&quot;initEpsg&quot;</span><span class="p">:</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;useClassicCoordinates&quot;</span><span class="p">:</span> <span class="n">true</span><span class="p">}]</span>

<span class="c1"># asset with geospatial metadata</span>
<span class="c1"># note that the epsg and initEpsg may be different for your asset</span>
<span class="p">[{</span><span class="s2">&quot;bounds&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="o">...</span><span class="p">],</span> <span class="p">[</span><span class="o">...</span><span class="p">]],</span> <span class="s2">&quot;epsg&quot;</span><span class="p">:</span> <span class="s2">&quot;EPSG4326&quot;</span><span class="p">,</span> <span class="s2">&quot;imageUrl&quot;</span><span class="p">:</span> <span class="s2">&quot;https://...&quot;</span><span class="p">,</span> <span class="s2">&quot;initEpsg&quot;</span><span class="p">:</span> <span class="mi">4326</span><span class="p">,</span> <span class="s2">&quot;useClassicCoordinates&quot;</span><span class="p">:</span> <span class="n">false</span><span class="p">}]</span>
</code></pre></div>
</div>
<h3 id="point">Point</h3>


  <div class="doc doc-object doc-module">


    <div class="doc doc-contents first">

      <p>Point label utils.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.point.geojson_point_feature_to_kili_point_annotation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">geojson_point_feature_to_kili_point_annotation</span><span class="p">(</span><span class="n">point</span><span class="p">,</span> <span class="n">categories</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mid</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a geojson point feature to a Kili point annotation.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>point</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>a geojson point feature.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>categories</code></td>
        <td><code>Optional[List[Dict]]</code></td>
        <td><p>the categories of the annotation.
If not provided, the categories are taken from the <code>kili</code> key of the geojson feature properties.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>children</code></td>
        <td><code>Optional[Dict]</code></td>
        <td><p>the children of the annotation.
If not provided, the children are taken from the <code>kili</code> key of the geojson feature properties.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>mid</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the mid of the annotation.
If not provided, the mid is taken from the <code>id</code> key of the geojson feature.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A Kili point annotation.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">point</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
    <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Point&#39;</span><span class="p">,</span> <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">]},</span>
    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;kili&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}]}}</span>
<span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">geojson_point_feature_to_kili_point_annotation</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s1">&#39;point&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">},</span>
    <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
    <span class="s1">&#39;mid&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;marker&#39;</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/point.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">geojson_point_feature_to_kili_point_annotation</span><span class="p">(</span>
    <span class="n">point</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">children</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">mid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="c1"># pylint: disable=line-too-long</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a geojson point feature to a Kili point annotation.</span>

<span class="sd">    Args:</span>
<span class="sd">        point: a geojson point feature.</span>
<span class="sd">        categories: the categories of the annotation.</span>
<span class="sd">            If not provided, the categories are taken from the `kili` key of the geojson feature properties.</span>
<span class="sd">        children: the children of the annotation.</span>
<span class="sd">            If not provided, the children are taken from the `kili` key of the geojson feature properties.</span>
<span class="sd">        mid: the mid of the annotation.</span>
<span class="sd">            If not provided, the mid is taken from the `id` key of the geojson feature.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A Kili point annotation.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; point = {</span>
<span class="sd">            &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">            &#39;geometry&#39;: {&#39;type&#39;: &#39;Point&#39;, &#39;coordinates&#39;: [-79.0, -3.0]},</span>
<span class="sd">            &#39;id&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;properties&#39;: {&#39;kili&#39;: {&#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}]}}</span>
<span class="sd">        }</span>
<span class="sd">        &gt;&gt;&gt; geojson_point_feature_to_kili_point_annotation(point)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;children&#39;: {},</span>
<span class="sd">            &#39;point&#39;: {&#39;x&#39;: -79.0, &#39;y&#39;: -3.0},</span>
<span class="sd">            &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">            &#39;mid&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;type&#39;: &#39;marker&#39;</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">point</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Feature type must be `Feature`, got: </span><span class="si">{</span><span class="n">point</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">point</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Point&quot;</span>
    <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Geometry type must be `Point`, got: </span><span class="si">{</span><span class="n">point</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="n">children</span> <span class="ow">or</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;kili&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;children&quot;</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">categories</span> <span class="o">=</span> <span class="n">categories</span> <span class="ow">or</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;kili&quot;</span><span class="p">][</span><span class="s2">&quot;categories&quot;</span><span class="p">]</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="n">children</span><span class="p">,</span>
        <span class="s2">&quot;categories&quot;</span><span class="p">:</span> <span class="n">categories</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;marker&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;point&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
        <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">}</span>

    <span class="k">if</span> <span class="n">mid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">mid</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">point</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">point</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.point.kili_point_annotation_to_geojson_point_feature" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kili_point_annotation_to_geojson_point_feature</span><span class="p">(</span><span class="n">point_annotation</span><span class="p">,</span> <span class="n">job_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a Kili point annotation to a geojson point feature.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>point_annotation</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>a Kili point annotation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>job_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the name of the job to which the annotation belongs.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A geojson point feature.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">point</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s1">&#39;point&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">},</span>
    <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
    <span class="s1">&#39;mid&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;marker&#39;</span>
<span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">kili_point_annotation_to_geojson_point_feature</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
    <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Point&#39;</span><span class="p">,</span>
        <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">]},</span>
        <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
        <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;kili&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
                <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;marker&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/point.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kili_point_annotation_to_geojson_point_feature</span><span class="p">(</span>
    <span class="n">point_annotation</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">job_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a Kili point annotation to a geojson point feature.</span>

<span class="sd">    Args:</span>
<span class="sd">        point_annotation: a Kili point annotation.</span>
<span class="sd">        job_name: the name of the job to which the annotation belongs.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A geojson point feature.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; point = {</span>
<span class="sd">            &#39;children&#39;: {},</span>
<span class="sd">            &#39;point&#39;: {&#39;x&#39;: -79.0, &#39;y&#39;: -3.0},</span>
<span class="sd">            &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">            &#39;mid&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;type&#39;: &#39;marker&#39;</span>
<span class="sd">        }</span>
<span class="sd">        &gt;&gt;&gt; kili_point_annotation_to_geojson_point_feature(point)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">            &#39;geometry&#39;: {</span>
<span class="sd">                &#39;type&#39;: &#39;Point&#39;,</span>
<span class="sd">                &#39;coordinates&#39;: [-79.0, -3.0]},</span>
<span class="sd">                &#39;id&#39;: &#39;mid_object&#39;,</span>
<span class="sd">                &#39;properties&#39;: {</span>
<span class="sd">                    &#39;kili&#39;: {</span>
<span class="sd">                        &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">                        &#39;children&#39;: {},</span>
<span class="sd">                        &#39;type&#39;: &#39;marker&#39;</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">point</span> <span class="o">=</span> <span class="n">point_annotation</span>
    <span class="k">assert</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;marker&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Annotation type must be `marker`, got: </span><span class="si">{</span><span class="n">point</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span> <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">kili_point_to_geojson_point</span><span class="p">(</span><span class="n">point</span><span class="p">[</span><span class="s2">&quot;point&quot;</span><span class="p">])}</span>
    <span class="k">if</span> <span class="s2">&quot;mid&quot;</span> <span class="ow">in</span> <span class="n">point</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span>
    <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;kili&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">point</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;point&quot;</span><span class="p">,</span> <span class="s2">&quot;mid&quot;</span><span class="p">]}}</span>
    <span class="k">if</span> <span class="n">job_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;kili&quot;</span><span class="p">][</span><span class="s2">&quot;job&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">job_name</span>
    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.point.kili_point_to_geojson_point" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kili_point_to_geojson_point</span><span class="p">(</span><span class="n">point</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a Kili point to a geojson point.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>point</code></td>
        <td><code>Dict[str, float]</code></td>
        <td><p>a Kili point (vertex).</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A geojson point.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">point</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">kili_point_to_geojson_point</span><span class="p">(</span><span class="n">point</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span>
    <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/point.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kili_point_to_geojson_point</span><span class="p">(</span><span class="n">point</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a Kili point to a geojson point.</span>

<span class="sd">    Args:</span>
<span class="sd">        point: a Kili point (vertex).</span>

<span class="sd">    Returns:</span>
<span class="sd">        A geojson point.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; point = {&quot;x&quot;: 1.0, &quot;y&quot;: 2.0}</span>
<span class="sd">        &gt;&gt;&gt; kili_point_to_geojson_point(point)</span>
<span class="sd">        {</span>
<span class="sd">            &quot;type&quot;: &quot;Point&quot;,</span>
<span class="sd">            &quot;coordinates&quot;: [1.0, 2.0]</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Point&quot;</span><span class="p">,</span> <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">point</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">point</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]]}</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>

<h3 id="line">Line</h3>


  <div class="doc doc-object doc-module">


    <div class="doc doc-contents first">

      <p>Geojson linestring utilities.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.line.geojson_linestring_feature_to_kili_line_annotation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">geojson_linestring_feature_to_kili_line_annotation</span><span class="p">(</span><span class="n">line</span><span class="p">,</span> <span class="n">categories</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mid</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a geojson linestring feature to a Kili line annotation.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>line</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>a geojson linestring feature.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>categories</code></td>
        <td><code>Optional[List[Dict]]</code></td>
        <td><p>the categories of the annotation.
If not provided, the categories are taken from the <code>kili</code> key of the geojson feature properties.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>children</code></td>
        <td><code>Optional[Dict]</code></td>
        <td><p>the children of the annotation.
If not provided, the children are taken from the <code>kili</code> key of the geojson feature properties.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>mid</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the mid of the annotation.
If not provided, the mid is taken from the <code>id</code> key of the geojson feature.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A Kili line annotation.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">line</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
    <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;LineString&#39;</span><span class="p">,</span>
        <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">]]},</span>
    <span class="p">}</span>
    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;kili&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
            <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;job&#39;</span><span class="p">:</span> <span class="s1">&#39;job_name&#39;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">geojson_linestring_feature_to_kili_line_annotation</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s1">&#39;polyline&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">}],</span>
    <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
    <span class="s1">&#39;mid&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;polyline&#39;</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/line.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">geojson_linestring_feature_to_kili_line_annotation</span><span class="p">(</span>
    <span class="n">line</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">children</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">mid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="c1"># pylint: disable=line-too-long</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a geojson linestring feature to a Kili line annotation.</span>

<span class="sd">    Args:</span>
<span class="sd">        line: a geojson linestring feature.</span>
<span class="sd">        categories: the categories of the annotation.</span>
<span class="sd">            If not provided, the categories are taken from the `kili` key of the geojson feature properties.</span>
<span class="sd">        children: the children of the annotation.</span>
<span class="sd">            If not provided, the children are taken from the `kili` key of the geojson feature properties.</span>
<span class="sd">        mid: the mid of the annotation.</span>
<span class="sd">            If not provided, the mid is taken from the `id` key of the geojson feature.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A Kili line annotation.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; line = {</span>
<span class="sd">            &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">            &#39;geometry&#39;: {</span>
<span class="sd">                &#39;type&#39;: &#39;LineString&#39;,</span>
<span class="sd">                &#39;coordinates&#39;: [[-79.0, -3.0], [-79.0, -3.0]]},</span>
<span class="sd">            }</span>
<span class="sd">            &#39;id&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;properties&#39;: {</span>
<span class="sd">                &#39;kili&#39;: {</span>
<span class="sd">                    &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">                    &#39;children&#39;: {},</span>
<span class="sd">                    &#39;job&#39;: &#39;job_name&#39;</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        &gt;&gt;&gt; geojson_linestring_feature_to_kili_line_annotation(line)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;children&#39;: {},</span>
<span class="sd">            &#39;polyline&#39;: [{&#39;x&#39;: -79.0, &#39;y&#39;: -3.0}, {&#39;x&#39;: -79.0, &#39;y&#39;: -3.0}],</span>
<span class="sd">            &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">            &#39;mid&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;type&#39;: &#39;polyline&#39;</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="n">line</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Feature type must be `Feature`, got: </span><span class="si">{</span><span class="n">line</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">line</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;LineString&quot;</span>
    <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Geometry type must be `LineString`, got: </span><span class="si">{</span><span class="n">line</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="n">children</span> <span class="ow">or</span> <span class="n">line</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;kili&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;children&quot;</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">categories</span> <span class="o">=</span> <span class="n">categories</span> <span class="ow">or</span> <span class="n">line</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;kili&quot;</span><span class="p">][</span><span class="s2">&quot;categories&quot;</span><span class="p">]</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="n">children</span><span class="p">,</span>
        <span class="s2">&quot;categories&quot;</span><span class="p">:</span> <span class="n">categories</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;polyline&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;polyline&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">coord</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">coord</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <span class="n">line</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">]]</span>

    <span class="k">if</span> <span class="n">mid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">mid</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">line</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">line</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.line.kili_line_annotation_to_geojson_linestring_feature" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kili_line_annotation_to_geojson_linestring_feature</span><span class="p">(</span><span class="n">polyline_annotation</span><span class="p">,</span> <span class="n">job_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a Kili line annotation to a geojson linestring feature.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>polyline_annotation</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>a Kili line annotation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>job_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the name of the job to which the annotation belongs.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A geojson linestring feature.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">polyline</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s1">&#39;polyline&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">},</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">}],</span>
    <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
    <span class="s1">&#39;mid&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;polyline&#39;</span>
<span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">kili_line_annotation_to_geojson_linestring_feature</span><span class="p">(</span><span class="n">polyline</span><span class="p">,</span> <span class="s1">&#39;job_name&#39;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
    <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;LineString&#39;</span><span class="p">,</span>
        <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[[</span><span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">]]},</span>
        <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
        <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;kili&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
                <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s1">&#39;job&#39;</span><span class="p">:</span> <span class="s1">&#39;job_name&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/line.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kili_line_annotation_to_geojson_linestring_feature</span><span class="p">(</span>
    <span class="n">polyline_annotation</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">job_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a Kili line annotation to a geojson linestring feature.</span>

<span class="sd">    Args:</span>
<span class="sd">        polyline_annotation: a Kili line annotation.</span>
<span class="sd">        job_name: the name of the job to which the annotation belongs.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A geojson linestring feature.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; polyline = {</span>
<span class="sd">            &#39;children&#39;: {},</span>
<span class="sd">            &#39;polyline&#39;: [{&#39;x&#39;: -79.0, &#39;y&#39;: -3.0}, {&#39;x&#39;: -79.0, &#39;y&#39;: -3.0}],</span>
<span class="sd">            &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">            &#39;mid&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;type&#39;: &#39;polyline&#39;</span>
<span class="sd">        }</span>
<span class="sd">        &gt;&gt;&gt; kili_line_annotation_to_geojson_linestring_feature(polyline, &#39;job_name&#39;)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">            &#39;geometry&#39;: {</span>
<span class="sd">                &#39;type&#39;: &#39;LineString&#39;,</span>
<span class="sd">                &#39;coordinates&#39;: [[-79.0, -3.0], [-79.0, -3.0]]},</span>
<span class="sd">                &#39;id&#39;: &#39;mid_object&#39;,</span>
<span class="sd">                &#39;properties&#39;: {</span>
<span class="sd">                    &#39;kili&#39;: {</span>
<span class="sd">                        &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">                        &#39;children&#39;: {},</span>
<span class="sd">                        &#39;job&#39;: &#39;job_name&#39;</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">polyline_annotation</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;polyline&quot;</span>
    <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Annotation type must be `polyline`, got: </span><span class="si">{</span><span class="n">polyline_annotation</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
        <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">kili_line_to_geojson_linestring</span><span class="p">(</span><span class="n">polyline_annotation</span><span class="p">[</span><span class="s2">&quot;polyline&quot;</span><span class="p">]),</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="s2">&quot;mid&quot;</span> <span class="ow">in</span> <span class="n">polyline_annotation</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">polyline_annotation</span><span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span>
    <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;kili&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">polyline_annotation</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">,</span> <span class="s2">&quot;polyline&quot;</span><span class="p">]}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">job_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;kili&quot;</span><span class="p">][</span><span class="s2">&quot;job&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">job_name</span>
    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.line.kili_line_to_geojson_linestring" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kili_line_to_geojson_linestring</span><span class="p">(</span><span class="n">polyline</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a Kili line to a geojson linestring.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>polyline</code></td>
        <td><code>List[Dict[str, float]]</code></td>
        <td><p>a Kili line (polyline).</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A geojson linestring.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">polyline</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mf">2.0</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">,</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">}]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">kili_line_to_geojson_linestring</span><span class="p">(</span><span class="n">polyline</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;LineString&quot;</span><span class="p">,</span>
    <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="mf">1.0</span><span class="p">,</span> <span class="mf">2.0</span><span class="p">],</span> <span class="p">[</span><span class="mf">3.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">]]</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/line.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kili_line_to_geojson_linestring</span><span class="p">(</span><span class="n">polyline</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a Kili line to a geojson linestring.</span>

<span class="sd">    Args:</span>
<span class="sd">        polyline: a Kili line (polyline).</span>

<span class="sd">    Returns:</span>
<span class="sd">        A geojson linestring.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; polyline = [{&quot;x&quot;: 1.0, &quot;y&quot;: 2.0}, {&quot;x&quot;: 3.0, &quot;y&quot;: 4.0}]</span>
<span class="sd">        &gt;&gt;&gt; kili_line_to_geojson_linestring(polyline)</span>
<span class="sd">        {</span>
<span class="sd">            &quot;type&quot;: &quot;LineString&quot;,</span>
<span class="sd">            &quot;coordinates&quot;: [[1.0, 2.0], [3.0, 4.0]]</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;LineString&quot;</span><span class="p">,</span> <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[]}</span>
    <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;coordinates&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[[</span><span class="n">vertex</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">vertex</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]]</span> <span class="k">for</span> <span class="n">vertex</span> <span class="ow">in</span> <span class="n">polyline</span><span class="p">]</span>
    <span class="k">return</span> <span class="n">ret</span>  <span class="c1"># type: ignore</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>

<h3 id="bounding-box">Bounding box</h3>


  <div class="doc doc-object doc-module">


    <div class="doc doc-contents first">

      <p>Bounding box conversion functions between Kili and geojson formats.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.bbox.geojson_polygon_feature_to_kili_bbox_annotation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">geojson_polygon_feature_to_kili_bbox_annotation</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="n">categories</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mid</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a geojson polygon feature to a Kili bounding box annotation.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>polygon</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>a geojson polygon feature.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>categories</code></td>
        <td><code>Optional[List[Dict]]</code></td>
        <td><p>the categories of the annotation.
If not provided, the categories are taken from the <code>kili</code> key of the geojson feature properties.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>children</code></td>
        <td><code>Optional[Dict]</code></td>
        <td><p>the children of the annotation.
If not provided, the children are taken from the <code>kili</code> key of the geojson feature properties.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>mid</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the mid of the annotation.
If not provided, the mid is taken from the <code>id</code> key of the geojson feature.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A Kili bounding box annotation.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">polygon</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
    <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Polygon&#39;</span><span class="p">,</span>
        <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">[</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">12.6</span><span class="p">,</span> <span class="mf">12.87</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">42.6</span><span class="p">,</span> <span class="mf">22.17</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">17.6</span><span class="p">,</span> <span class="o">-</span><span class="mf">22.4</span><span class="p">],</span>
                <span class="p">[</span><span class="mf">2.6</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.87</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">12.6</span><span class="p">,</span> <span class="mf">12.87</span><span class="p">]</span>
            <span class="p">]</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;kili&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
            <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;rectangle&#39;</span><span class="p">,</span>
            <span class="s1">&#39;job&#39;</span><span class="p">:</span> <span class="s1">&#39;job_name&#39;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">geojson_polygon_feature_to_kili_bbox_annotation</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s1">&#39;boundingPoly&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s1">&#39;normalizedVertices&#39;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">12.6</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mf">12.87</span><span class="p">},</span>
                    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">42.6</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mf">22.17</span><span class="p">},</span>
                    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">17.6</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">22.4</span><span class="p">},</span>
                    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mf">2.6</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.87</span><span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">],</span>
    <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
    <span class="s1">&#39;mid&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;rectangle&#39;</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/bbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">geojson_polygon_feature_to_kili_bbox_annotation</span><span class="p">(</span>
    <span class="n">polygon</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">children</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">mid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="c1"># pylint: disable=line-too-long</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a geojson polygon feature to a Kili bounding box annotation.</span>

<span class="sd">    Args:</span>
<span class="sd">        polygon: a geojson polygon feature.</span>
<span class="sd">        categories: the categories of the annotation.</span>
<span class="sd">            If not provided, the categories are taken from the `kili` key of the geojson feature properties.</span>
<span class="sd">        children: the children of the annotation.</span>
<span class="sd">            If not provided, the children are taken from the `kili` key of the geojson feature properties.</span>
<span class="sd">        mid: the mid of the annotation.</span>
<span class="sd">            If not provided, the mid is taken from the `id` key of the geojson feature.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A Kili bounding box annotation.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; polygon = {</span>
<span class="sd">            &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">            &#39;geometry&#39;: {</span>
<span class="sd">                &#39;type&#39;: &#39;Polygon&#39;,</span>
<span class="sd">                &#39;coordinates&#39;: [</span>
<span class="sd">                    [</span>
<span class="sd">                        [-12.6, 12.87],</span>
<span class="sd">                        [-42.6, 22.17],</span>
<span class="sd">                        [-17.6, -22.4],</span>
<span class="sd">                        [2.6, -1.87],</span>
<span class="sd">                        [-12.6, 12.87]</span>
<span class="sd">                    ]</span>
<span class="sd">                ]</span>
<span class="sd">            },</span>
<span class="sd">            &#39;id&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;properties&#39;: {</span>
<span class="sd">                &#39;kili&#39;: {</span>
<span class="sd">                    &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">                    &#39;children&#39;: {},</span>
<span class="sd">                    &#39;type&#39;: &#39;rectangle&#39;,</span>
<span class="sd">                    &#39;job&#39;: &#39;job_name&#39;</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        &gt;&gt;&gt; geojson_polygon_feature_to_kili_bbox_annotation(polygon)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;children&#39;: {},</span>
<span class="sd">            &#39;boundingPoly&#39;: [</span>
<span class="sd">                    {</span>
<span class="sd">                        &#39;normalizedVertices&#39;: [</span>
<span class="sd">                            {&#39;x&#39;: -12.6, &#39;y&#39;: 12.87},</span>
<span class="sd">                            {&#39;x&#39;: -42.6, &#39;y&#39;: 22.17},</span>
<span class="sd">                            {&#39;x&#39;: -17.6, &#39;y&#39;: -22.4},</span>
<span class="sd">                            {&#39;x&#39;: 2.6, &#39;y&#39;: -1.87}</span>
<span class="sd">                        ]</span>
<span class="sd">                    }</span>
<span class="sd">                ],</span>
<span class="sd">            &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">            &#39;mid&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;type&#39;: &#39;rectangle&#39;</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">polygon</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;Feature&quot;</span>
    <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Feature type must be `Feature`, got: </span><span class="si">{</span><span class="n">polygon</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Polygon&quot;</span>
    <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Geometry type must be `Polygon`, got: </span><span class="si">{</span><span class="n">polygon</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="n">children</span> <span class="ow">or</span> <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;kili&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;children&quot;</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">categories</span> <span class="o">=</span> <span class="n">categories</span> <span class="ow">or</span> <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;kili&quot;</span><span class="p">][</span><span class="s2">&quot;categories&quot;</span><span class="p">]</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="n">children</span><span class="p">,</span>
        <span class="s2">&quot;categories&quot;</span><span class="p">:</span> <span class="n">categories</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="c1"># geojson polygon has one more point than kili bounding box</span>
    <span class="n">coords</span> <span class="o">=</span> <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">normalized_vertices</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">coords</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">]},</span>
        <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">coords</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">coords</span><span class="p">[</span><span class="mi">3</span><span class="p">][</span><span class="mi">1</span><span class="p">]},</span>
        <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">coords</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">coords</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]},</span>
        <span class="p">{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">coords</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]},</span>
    <span class="p">]</span>
    <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;boundingPoly&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;normalizedVertices&quot;</span><span class="p">:</span> <span class="n">normalized_vertices</span><span class="p">}]</span>

    <span class="k">if</span> <span class="n">mid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">mid</span>
    <span class="k">elif</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">polygon</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>

    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.bbox.kili_bbox_annotation_to_geojson_polygon_feature" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kili_bbox_annotation_to_geojson_polygon_feature</span><span class="p">(</span><span class="n">bbox_annotation</span><span class="p">,</span> <span class="n">job_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a Kili bounding box annotation to a geojson polygon feature.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>bbox_annotation</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>a Kili bounding box annotation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>job_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the name of the job to which the annotation belongs.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A geojson polygon feature.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">bbox</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s1">&#39;boundingPoly&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s1">&#39;normalizedVertices&#39;</span><span class="p">:</span> <span class="p">[</span>
                    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">12.6</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mf">12.87</span><span class="p">},</span>
                    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">42.6</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mf">22.17</span><span class="p">},</span>
                    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">17.6</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">22.4</span><span class="p">},</span>
                    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mf">2.6</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">1.87</span><span class="p">}</span>
                <span class="p">]</span>
            <span class="p">}</span>
        <span class="p">],</span>
    <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
    <span class="s1">&#39;mid&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;rectangle&#39;</span>
<span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">kili_bbox_annotation_to_geojson_polygon_feature</span><span class="p">(</span><span class="n">bbox</span><span class="p">,</span> <span class="s1">&#39;job_name&#39;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
    <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Polygon&#39;</span><span class="p">,</span>
        <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">[</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">12.6</span><span class="p">,</span> <span class="mf">12.87</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">42.6</span><span class="p">,</span> <span class="mf">22.17</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">17.6</span><span class="p">,</span> <span class="o">-</span><span class="mf">22.4</span><span class="p">],</span>
                <span class="p">[</span><span class="mf">2.6</span><span class="p">,</span> <span class="o">-</span><span class="mf">1.87</span><span class="p">],</span>
                <span class="p">[</span><span class="o">-</span><span class="mf">12.6</span><span class="p">,</span> <span class="mf">12.87</span><span class="p">]</span>
            <span class="p">]</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;kili&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
            <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;rectangle&#39;</span><span class="p">,</span>
            <span class="s1">&#39;job&#39;</span><span class="p">:</span> <span class="s1">&#39;job_name&#39;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/bbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kili_bbox_annotation_to_geojson_polygon_feature</span><span class="p">(</span>
    <span class="n">bbox_annotation</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">job_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a Kili bounding box annotation to a geojson polygon feature.</span>

<span class="sd">    Args:</span>
<span class="sd">        bbox_annotation: a Kili bounding box annotation.</span>
<span class="sd">        job_name: the name of the job to which the annotation belongs.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A geojson polygon feature.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; bbox = {</span>
<span class="sd">            &#39;children&#39;: {},</span>
<span class="sd">            &#39;boundingPoly&#39;: [</span>
<span class="sd">                    {</span>
<span class="sd">                        &#39;normalizedVertices&#39;: [</span>
<span class="sd">                            {&#39;x&#39;: -12.6, &#39;y&#39;: 12.87},</span>
<span class="sd">                            {&#39;x&#39;: -42.6, &#39;y&#39;: 22.17},</span>
<span class="sd">                            {&#39;x&#39;: -17.6, &#39;y&#39;: -22.4},</span>
<span class="sd">                            {&#39;x&#39;: 2.6, &#39;y&#39;: -1.87}</span>
<span class="sd">                        ]</span>
<span class="sd">                    }</span>
<span class="sd">                ],</span>
<span class="sd">            &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">            &#39;mid&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;type&#39;: &#39;rectangle&#39;</span>
<span class="sd">        }</span>
<span class="sd">        &gt;&gt;&gt; kili_bbox_annotation_to_geojson_polygon_feature(bbox, &#39;job_name&#39;)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">            &#39;geometry&#39;: {</span>
<span class="sd">                &#39;type&#39;: &#39;Polygon&#39;,</span>
<span class="sd">                &#39;coordinates&#39;: [</span>
<span class="sd">                    [</span>
<span class="sd">                        [-12.6, 12.87],</span>
<span class="sd">                        [-42.6, 22.17],</span>
<span class="sd">                        [-17.6, -22.4],</span>
<span class="sd">                        [2.6, -1.87],</span>
<span class="sd">                        [-12.6, 12.87]</span>
<span class="sd">                    ]</span>
<span class="sd">                ]</span>
<span class="sd">            },</span>
<span class="sd">            &#39;id&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;properties&#39;: {</span>
<span class="sd">                &#39;kili&#39;: {</span>
<span class="sd">                    &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">                    &#39;children&#39;: {},</span>
<span class="sd">                    &#39;type&#39;: &#39;rectangle&#39;,</span>
<span class="sd">                    &#39;job&#39;: &#39;job_name&#39;</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bbox</span> <span class="o">=</span> <span class="n">bbox_annotation</span>
    <span class="k">assert</span> <span class="n">bbox</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;rectangle&quot;</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Annotation type must be `rectangle`, got: </span><span class="si">{</span><span class="n">bbox</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
        <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">kili_bbox_to_geojson_polygon</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="s2">&quot;boundingPoly&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;normalizedVertices&quot;</span><span class="p">]),</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="s2">&quot;mid&quot;</span> <span class="ow">in</span> <span class="n">bbox</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">bbox</span><span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span>
    <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;kili&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">bbox</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;boundingPoly&quot;</span><span class="p">,</span> <span class="s2">&quot;mid&quot;</span><span class="p">]}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">job_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;kili&quot;</span><span class="p">][</span><span class="s2">&quot;job&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">job_name</span>
    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.bbox.kili_bbox_to_geojson_polygon" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kili_bbox_to_geojson_polygon</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a Kili bounding box to a geojson polygon.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>vertices</code></td>
        <td><code>List[Dict[str, float]]</code></td>
        <td><p>Kili bounding polygon vertices.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A geojson polygon.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">vertices</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mf">12.0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mf">12.0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mf">13.0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mf">4.0</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mf">13.0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mf">3.0</span><span class="p">}</span>
<span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">kili_bbox_to_geojson_polygon</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Polygon&#39;</span><span class="p">,</span>
    <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="mf">12.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">12.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">13.0</span><span class="p">,</span> <span class="mf">4.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">13.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">12.0</span><span class="p">,</span> <span class="mf">3.0</span><span class="p">]</span>
        <span class="p">]</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/bbox.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kili_bbox_to_geojson_polygon</span><span class="p">(</span><span class="n">vertices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a Kili bounding box to a geojson polygon.</span>

<span class="sd">    Args:</span>
<span class="sd">        vertices: Kili bounding polygon vertices.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A geojson polygon.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; vertices = [</span>
<span class="sd">            {&#39;x&#39;: 12.0, &#39;y&#39;: 3.0},</span>
<span class="sd">            {&#39;x&#39;: 12.0, &#39;y&#39;: 4.0},</span>
<span class="sd">            {&#39;x&#39;: 13.0, &#39;y&#39;: 4.0},</span>
<span class="sd">            {&#39;x&#39;: 13.0, &#39;y&#39;: 3.0}</span>
<span class="sd">        ]</span>
<span class="sd">        &gt;&gt;&gt; kili_bbox_to_geojson_polygon(vertices)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;type&#39;: &#39;Polygon&#39;,</span>
<span class="sd">            &#39;coordinates&#39;: [</span>
<span class="sd">                [</span>
<span class="sd">                    [12.0, 3.0],</span>
<span class="sd">                    [12.0, 4.0],</span>
<span class="sd">                    [13.0, 4.0],</span>
<span class="sd">                    [13.0, 3.0],</span>
<span class="sd">                    [12.0, 3.0]</span>
<span class="sd">                ]</span>
<span class="sd">            ]</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">vertex_name_to_value</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">vertex</span><span class="p">,</span> <span class="n">point_name</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span>
        <span class="n">vertices</span><span class="p">,</span> <span class="p">(</span><span class="s2">&quot;bottom_left&quot;</span><span class="p">,</span> <span class="s2">&quot;top_left&quot;</span><span class="p">,</span> <span class="s2">&quot;top_right&quot;</span><span class="p">,</span> <span class="s2">&quot;bottom_right&quot;</span><span class="p">)</span>
    <span class="p">):</span>
        <span class="n">vertex_name_to_value</span><span class="p">[</span><span class="n">point_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">vertex</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[]}</span>
    <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;coordinates&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="n">vertex_name_to_value</span><span class="p">[</span><span class="s2">&quot;bottom_left&quot;</span><span class="p">][</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">vertex_name_to_value</span><span class="p">[</span><span class="s2">&quot;bottom_left&quot;</span><span class="p">][</span><span class="s2">&quot;y&quot;</span><span class="p">]],</span>
            <span class="p">[</span><span class="n">vertex_name_to_value</span><span class="p">[</span><span class="s2">&quot;bottom_right&quot;</span><span class="p">][</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">vertex_name_to_value</span><span class="p">[</span><span class="s2">&quot;bottom_right&quot;</span><span class="p">][</span><span class="s2">&quot;y&quot;</span><span class="p">]],</span>
            <span class="p">[</span><span class="n">vertex_name_to_value</span><span class="p">[</span><span class="s2">&quot;top_right&quot;</span><span class="p">][</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">vertex_name_to_value</span><span class="p">[</span><span class="s2">&quot;top_right&quot;</span><span class="p">][</span><span class="s2">&quot;y&quot;</span><span class="p">]],</span>
            <span class="p">[</span><span class="n">vertex_name_to_value</span><span class="p">[</span><span class="s2">&quot;top_left&quot;</span><span class="p">][</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">vertex_name_to_value</span><span class="p">[</span><span class="s2">&quot;top_left&quot;</span><span class="p">][</span><span class="s2">&quot;y&quot;</span><span class="p">]],</span>
            <span class="p">[</span><span class="n">vertex_name_to_value</span><span class="p">[</span><span class="s2">&quot;bottom_left&quot;</span><span class="p">][</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">vertex_name_to_value</span><span class="p">[</span><span class="s2">&quot;bottom_left&quot;</span><span class="p">][</span><span class="s2">&quot;y&quot;</span><span class="p">]],</span>
        <span class="p">]</span>
    <span class="p">]</span>

    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>

<h3 id="polygon">Polygon</h3>


  <div class="doc doc-object doc-module">


    <div class="doc doc-contents first">

      <p>Polygon label utils.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.polygon.geojson_polygon_feature_to_kili_polygon_annotation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">geojson_polygon_feature_to_kili_polygon_annotation</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="n">categories</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mid</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a geojson polygon feature to a Kili polygon annotation.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>polygon</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>a geojson polygon feature.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>categories</code></td>
        <td><code>Optional[List[Dict]]</code></td>
        <td><p>the categories of the annotation.
If not provided, the categories are taken from the <code>kili</code> key of the geojson feature properties.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>children</code></td>
        <td><code>Optional[Dict]</code></td>
        <td><p>the children of the annotation.
If not provided, the children are taken from the <code>kili</code> key of the geojson feature properties.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>mid</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the mid of the annotation.
If not provided, the mid is taken from the <code>id</code> key of the geojson feature.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A Kili polygon annotation.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">polygon</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
    <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Polygon&#39;</span><span class="p">,</span>
        <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[[[</span><span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">]]]},</span>
    <span class="p">},</span>
    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;kili&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
            <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;polygon&#39;</span><span class="p">,</span>
            <span class="s1">&#39;job&#39;</span><span class="p">:</span> <span class="s1">&#39;job_name&#39;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">geojson_polygon_feature_to_kili_polygon_annotation</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s1">&#39;boundingPoly&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;normalizedVertices&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">}]}],</span>
    <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
    <span class="s1">&#39;mid&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;polygon&#39;</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/polygon.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">geojson_polygon_feature_to_kili_polygon_annotation</span><span class="p">(</span>
    <span class="n">polygon</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">children</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">mid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="c1"># pylint: disable=line-too-long</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a geojson polygon feature to a Kili polygon annotation.</span>

<span class="sd">    Args:</span>
<span class="sd">        polygon: a geojson polygon feature.</span>
<span class="sd">        categories: the categories of the annotation.</span>
<span class="sd">            If not provided, the categories are taken from the `kili` key of the geojson feature properties.</span>
<span class="sd">        children: the children of the annotation.</span>
<span class="sd">            If not provided, the children are taken from the `kili` key of the geojson feature properties.</span>
<span class="sd">        mid: the mid of the annotation.</span>
<span class="sd">            If not provided, the mid is taken from the `id` key of the geojson feature.</span>


<span class="sd">    Returns:</span>
<span class="sd">        A Kili polygon annotation.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; polygon = {</span>
<span class="sd">            &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">            &#39;geometry&#39;: {</span>
<span class="sd">                &#39;type&#39;: &#39;Polygon&#39;,</span>
<span class="sd">                &#39;coordinates&#39;: [[[-79.0, -3.0], [-79.0, -3.0]]]},</span>
<span class="sd">            },</span>
<span class="sd">            &#39;id&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;properties&#39;: {</span>
<span class="sd">                &#39;kili&#39;: {</span>
<span class="sd">                    &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">                    &#39;children&#39;: {},</span>
<span class="sd">                    &#39;type&#39;: &#39;polygon&#39;,</span>
<span class="sd">                    &#39;job&#39;: &#39;job_name&#39;</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        &gt;&gt;&gt; geojson_polygon_feature_to_kili_polygon_annotation(polygon)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;children&#39;: {},</span>
<span class="sd">            &#39;boundingPoly&#39;: [{&#39;normalizedVertices&#39;: [{&#39;x&#39;: -79.0, &#39;y&#39;: -3.0}]}],</span>
<span class="sd">            &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">            &#39;mid&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;type&#39;: &#39;polygon&#39;</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">polygon</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;Feature&quot;</span>
    <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Feature type must be `Feature`, got: </span><span class="si">{</span><span class="n">polygon</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Polygon&quot;</span>
    <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Geometry type must be `Polygon`, got: </span><span class="si">{</span><span class="n">polygon</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="n">children</span> <span class="ow">or</span> <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;kili&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;children&quot;</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">categories</span> <span class="o">=</span> <span class="n">categories</span> <span class="ow">or</span> <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;kili&quot;</span><span class="p">][</span><span class="s2">&quot;categories&quot;</span><span class="p">]</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="n">children</span><span class="p">,</span>
        <span class="s2">&quot;categories&quot;</span><span class="p">:</span> <span class="n">categories</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;polygon&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">coords</span> <span class="o">=</span> <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">normalized_vertices</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">coord</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">coord</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]]</span>
    <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;boundingPoly&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;normalizedVertices&quot;</span><span class="p">:</span> <span class="n">normalized_vertices</span><span class="p">}]</span>

    <span class="k">if</span> <span class="n">mid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">mid</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">polygon</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.polygon.get_oriented_area" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_oriented_area</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Returns the area value which gives an indication on the vertices order.
Positive if counter-clockwise, negative if clockwise.</p>
<p>This function uses the Shoelace formula :
see also : https://en.wikipedia.org/wiki/Shoelace_formula</p>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/polygon.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_oriented_area</span><span class="p">(</span><span class="n">vertices</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the area value which gives an indication on the vertices order.</span>
<span class="sd">    Positive if counter-clockwise, negative if clockwise.</span>

<span class="sd">    This function uses the Shoelace formula :</span>
<span class="sd">    see also : https://en.wikipedia.org/wiki/Shoelace_formula</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
    <span class="n">sum_product</span> <span class="o">=</span> <span class="mi">0</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
        <span class="n">x1</span><span class="p">,</span> <span class="n">y1</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s2">&quot;y&quot;</span><span class="p">]</span>
        <span class="n">x2</span><span class="p">,</span> <span class="n">y2</span> <span class="o">=</span> <span class="n">vertices</span><span class="p">[(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">n</span><span class="p">][</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">vertices</span><span class="p">[(</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">n</span><span class="p">][</span><span class="s2">&quot;y&quot;</span><span class="p">]</span>
        <span class="n">sum_product</span> <span class="o">+=</span> <span class="p">(</span><span class="n">x1</span> <span class="o">-</span> <span class="n">x2</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">y2</span> <span class="o">+</span> <span class="n">y1</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">sum_product</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.polygon.kili_polygon_annotation_to_geojson_polygon_feature" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kili_polygon_annotation_to_geojson_polygon_feature</span><span class="p">(</span><span class="n">polygon_annotation</span><span class="p">,</span> <span class="n">job_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a Kili polygon annotation to a geojson polygon feature.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>polygon_annotation</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>a Kili polygon annotation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>job_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the name of the job to which the annotation belongs.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A geojson polygon feature.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">polygon</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s1">&#39;boundingPoly&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;normalizedVertices&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">}]}],</span>
    <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
    <span class="s1">&#39;mid&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;polygon&#39;</span>
<span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">kili_polygon_annotation_to_geojson_polygon_feature</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="s1">&#39;job_name&#39;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
    <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Polygon&#39;</span><span class="p">,</span>
        <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[[[</span><span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">]]]},</span>
        <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
        <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;kili&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
                <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;polygon&#39;</span><span class="p">,</span>
                <span class="s1">&#39;job&#39;</span><span class="p">:</span> <span class="s1">&#39;job_name&#39;</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/polygon.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kili_polygon_annotation_to_geojson_polygon_feature</span><span class="p">(</span>
    <span class="n">polygon_annotation</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">job_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a Kili polygon annotation to a geojson polygon feature.</span>

<span class="sd">    Args:</span>
<span class="sd">        polygon_annotation: a Kili polygon annotation.</span>
<span class="sd">        job_name: the name of the job to which the annotation belongs.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A geojson polygon feature.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; polygon = {</span>
<span class="sd">            &#39;children&#39;: {},</span>
<span class="sd">            &#39;boundingPoly&#39;: [{&#39;normalizedVertices&#39;: [{&#39;x&#39;: -79.0, &#39;y&#39;: -3.0}]}],</span>
<span class="sd">            &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">            &#39;mid&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;type&#39;: &#39;polygon&#39;</span>
<span class="sd">        }</span>
<span class="sd">        &gt;&gt;&gt; kili_polygon_annotation_to_geojson_polygon_feature(polygon, &#39;job_name&#39;)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">            &#39;geometry&#39;: {</span>
<span class="sd">                &#39;type&#39;: &#39;Polygon&#39;,</span>
<span class="sd">                &#39;coordinates&#39;: [[[-79.0, -3.0], [-79.0, -3.0]]]},</span>
<span class="sd">                &#39;id&#39;: &#39;mid_object&#39;,</span>
<span class="sd">                &#39;properties&#39;: {</span>
<span class="sd">                    &#39;kili&#39;: {</span>
<span class="sd">                        &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">                        &#39;children&#39;: {},</span>
<span class="sd">                        &#39;type&#39;: &#39;polygon&#39;,</span>
<span class="sd">                        &#39;job&#39;: &#39;job_name&#39;</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">polygon</span> <span class="o">=</span> <span class="n">polygon_annotation</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;polygon&quot;</span>
    <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Annotation type must be `polygon`, got: </span><span class="si">{</span><span class="n">polygon</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
        <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">kili_polygon_to_geojson_polygon</span><span class="p">(</span>
            <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;boundingPoly&quot;</span><span class="p">][</span><span class="mi">0</span><span class="p">][</span><span class="s2">&quot;normalizedVertices&quot;</span><span class="p">]</span>
        <span class="p">),</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="s2">&quot;mid&quot;</span> <span class="ow">in</span> <span class="n">polygon</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span>
    <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;kili&quot;</span><span class="p">:</span> <span class="p">{</span><span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">polygon</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;boundingPoly&quot;</span><span class="p">,</span> <span class="s2">&quot;mid&quot;</span><span class="p">]}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">job_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;kili&quot;</span><span class="p">][</span><span class="s2">&quot;job&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">job_name</span>
    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.polygon.kili_polygon_to_geojson_polygon" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kili_polygon_to_geojson_polygon</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a Kili polygon to a geojson polygon.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>vertices</code></td>
        <td><code>List[Dict[str, float]]</code></td>
        <td><p>Kili polygon vertices.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A geojson polygon.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">vertices</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mf">10.42</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mf">27.12</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mf">1.53</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mf">14.57</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mf">147.45</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mf">14.12</span><span class="p">},</span>
    <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="mf">14.23</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="mf">0.23</span><span class="p">}</span>
<span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">kili_polygon_to_geojson_polygon</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Polygon&#39;</span><span class="p">,</span>
    <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span>
            <span class="p">[</span><span class="mf">10.42</span><span class="p">,</span> <span class="mf">27.12</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">1.53</span><span class="p">,</span> <span class="mf">14.57</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">147.45</span><span class="p">,</span> <span class="mf">14.12</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">14.23</span><span class="p">,</span> <span class="mf">0.23</span><span class="p">],</span>
            <span class="p">[</span><span class="mf">10.42</span><span class="p">,</span> <span class="mf">27.12</span><span class="p">]</span>
        <span class="p">]</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/polygon.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kili_polygon_to_geojson_polygon</span><span class="p">(</span><span class="n">vertices</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">float</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a Kili polygon to a geojson polygon.</span>

<span class="sd">    Args:</span>
<span class="sd">        vertices: Kili polygon vertices.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A geojson polygon.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; vertices = [</span>
<span class="sd">            {&#39;x&#39;: 10.42, &#39;y&#39;: 27.12},</span>
<span class="sd">            {&#39;x&#39;: 1.53, &#39;y&#39;: 14.57},</span>
<span class="sd">            {&#39;x&#39;: 147.45, &#39;y&#39;: 14.12},</span>
<span class="sd">            {&#39;x&#39;: 14.23, &#39;y&#39;: 0.23}</span>
<span class="sd">        ]</span>
<span class="sd">        &gt;&gt;&gt; kili_polygon_to_geojson_polygon(vertices)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;type&#39;: &#39;Polygon&#39;,</span>
<span class="sd">            &#39;coordinates&#39;: [</span>
<span class="sd">                [</span>
<span class="sd">                    [10.42, 27.12],</span>
<span class="sd">                    [1.53, 14.57],</span>
<span class="sd">                    [147.45, 14.12],</span>
<span class="sd">                    [14.23, 0.23],</span>
<span class="sd">                    [10.42, 27.12]</span>
<span class="sd">                ]</span>
<span class="sd">            ]</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">reordered_polygon_vertices</span> <span class="o">=</span> <span class="n">order_counter_clockwise</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
    <span class="n">polygon</span> <span class="o">=</span> <span class="p">[[</span><span class="n">vertex</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">vertex</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]]</span> <span class="k">for</span> <span class="n">vertex</span> <span class="ow">in</span> <span class="n">reordered_polygon_vertices</span><span class="p">]</span>

    <span class="n">polygon</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">polygon</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># the first and last positions must be the same</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[</span><span class="n">polygon</span><span class="p">]}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.polygon.order_counter_clockwise" class="doc doc-heading">
<code class="highlight language-python"><span class="n">order_counter_clockwise</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Returns the vertices, in the correct order :</p>
<p>If the vertices are set clockwise, we reverse them to have them in the anti-clockwise order.
For more information on the order expected for GeoJson :
https://datatracker.ietf.org/doc/html/rfc7946#section-3.1.6</p>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/polygon.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">order_counter_clockwise</span><span class="p">(</span><span class="n">vertices</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the vertices, in the correct order :</span>

<span class="sd">    If the vertices are set clockwise, we reverse them to have them in the anti-clockwise order.</span>
<span class="sd">    For more information on the order expected for GeoJson :</span>
<span class="sd">    https://datatracker.ietf.org/doc/html/rfc7946#section-3.1.6</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">order</span> <span class="o">=</span> <span class="n">get_oriented_area</span><span class="p">(</span><span class="n">vertices</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">order</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">vertices</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">order</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">ConversionError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Polygon order could not be identified as clockwise nor counter-clockwise because of </span><span class="se">\</span>
<span class="s2">                edges intersection in </span><span class="si">{</span><span class="n">vertices</span><span class="si">}</span><span class="s2"> and thus cannot be exported to GeoJson format.&quot;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">vertices</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>

<h3 id="segmentation">Segmentation</h3>


  <div class="doc doc-object doc-module">


    <div class="doc doc-contents first">

      <p>Geojson segmentation utilities.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.segmentation.geojson_polygon_feature_to_kili_segmentation_annotation" class="doc doc-heading">
<code class="highlight language-python"><span class="n">geojson_polygon_feature_to_kili_segmentation_annotation</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="n">categories</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">children</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mid</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a geojson polygon feature to a Kili segmentation annotation.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>polygon</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>a geojson polygon feature.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>categories</code></td>
        <td><code>Optional[List[Dict]]</code></td>
        <td><p>the categories of the annotation.
If not provided, the categories are taken from the <code>kili</code> key of the geojson feature properties.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>children</code></td>
        <td><code>Optional[Dict]</code></td>
        <td><p>the children of the annotation.
If not provided, the children are taken from the <code>kili</code> key of the geojson feature properties.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>mid</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the mid of the annotation.
If not provided, the mid is taken from the <code>id</code> key of the geojson feature.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A Kili segmentation annotation.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">polygon</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
    <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Polygon&#39;</span><span class="p">,</span>
        <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">[</span>
                <span class="o">...</span>
            <span class="p">],</span>
            <span class="p">[</span>
                <span class="o">...</span>
            <span class="p">]</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;kili&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
            <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;semantic&#39;</span><span class="p">,</span>
            <span class="s1">&#39;job&#39;</span><span class="p">:</span> <span class="s1">&#39;job_name&#39;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">geojson_polygon_feature_to_kili_segmentation_annotation</span><span class="p">(</span><span class="n">polygon</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s1">&#39;boundingPoly&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;normalizedVertices&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]},</span>
        <span class="p">{</span><span class="s1">&#39;normalizedVertices&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]}</span>
    <span class="p">],</span>
    <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
    <span class="s1">&#39;mid&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;semantic&#39;</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/segmentation.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">geojson_polygon_feature_to_kili_segmentation_annotation</span><span class="p">(</span>
    <span class="n">polygon</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">categories</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">children</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">mid</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="c1"># pylint: disable=line-too-long</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a geojson polygon feature to a Kili segmentation annotation.</span>

<span class="sd">    Args:</span>
<span class="sd">        polygon: a geojson polygon feature.</span>
<span class="sd">        categories: the categories of the annotation.</span>
<span class="sd">            If not provided, the categories are taken from the `kili` key of the geojson feature properties.</span>
<span class="sd">        children: the children of the annotation.</span>
<span class="sd">            If not provided, the children are taken from the `kili` key of the geojson feature properties.</span>
<span class="sd">        mid: the mid of the annotation.</span>
<span class="sd">            If not provided, the mid is taken from the `id` key of the geojson feature.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A Kili segmentation annotation.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; polygon = {</span>
<span class="sd">            &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">            &#39;geometry&#39;: {</span>
<span class="sd">                &#39;type&#39;: &#39;Polygon&#39;,</span>
<span class="sd">                &#39;coordinates&#39;: [</span>
<span class="sd">                    [</span>
<span class="sd">                        ...</span>
<span class="sd">                    ],</span>
<span class="sd">                    [</span>
<span class="sd">                        ...</span>
<span class="sd">                    ]</span>
<span class="sd">                ]</span>
<span class="sd">            },</span>
<span class="sd">            &#39;id&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;properties&#39;: {</span>
<span class="sd">                &#39;kili&#39;: {</span>
<span class="sd">                    &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">                    &#39;children&#39;: {},</span>
<span class="sd">                    &#39;type&#39;: &#39;semantic&#39;,</span>
<span class="sd">                    &#39;job&#39;: &#39;job_name&#39;</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        &gt;&gt;&gt; geojson_polygon_feature_to_kili_segmentation_annotation(polygon)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;children&#39;: {},</span>
<span class="sd">            &#39;boundingPoly&#39;: [</span>
<span class="sd">                {&#39;normalizedVertices&#39;: [...]},</span>
<span class="sd">                {&#39;normalizedVertices&#39;: [...]}</span>
<span class="sd">            ],</span>
<span class="sd">            &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">            &#39;mid&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;type&#39;: &#39;semantic&#39;</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">polygon</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;Feature&quot;</span>
    <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Feature type must be `Feature`, got: </span><span class="si">{</span><span class="n">polygon</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;Polygon&quot;</span>
    <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Geometry type must be `Polygon`, got: </span><span class="si">{</span><span class="n">polygon</span><span class="p">[</span><span class="s1">&#39;geometry&#39;</span><span class="p">][</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">children</span> <span class="o">=</span> <span class="n">children</span> <span class="ow">or</span> <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;kili&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;children&quot;</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">categories</span> <span class="o">=</span> <span class="n">categories</span> <span class="ow">or</span> <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;kili&quot;</span><span class="p">][</span><span class="s2">&quot;categories&quot;</span><span class="p">]</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;children&quot;</span><span class="p">:</span> <span class="n">children</span><span class="p">,</span>
        <span class="s2">&quot;categories&quot;</span><span class="p">:</span> <span class="n">categories</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;semantic&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">coords</span> <span class="o">=</span> <span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;geometry&quot;</span><span class="p">][</span><span class="s2">&quot;coordinates&quot;</span><span class="p">]</span>
    <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;boundingPoly&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span>
        <span class="p">{</span><span class="s2">&quot;normalizedVertices&quot;</span><span class="p">:</span> <span class="p">[{</span><span class="s2">&quot;x&quot;</span><span class="p">:</span> <span class="n">coord</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;y&quot;</span><span class="p">:</span> <span class="n">coord</span><span class="p">[</span><span class="mi">1</span><span class="p">]}</span> <span class="k">for</span> <span class="n">coord</span> <span class="ow">in</span> <span class="n">polygon</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]]}</span>
        <span class="k">for</span> <span class="n">polygon</span> <span class="ow">in</span> <span class="n">coords</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="n">mid</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">mid</span><span class="p">)</span>
    <span class="k">elif</span> <span class="s2">&quot;id&quot;</span> <span class="ow">in</span> <span class="n">polygon</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">polygon</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">])</span>

    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.segmentation.kili_segmentation_annotation_to_geojson_polygon_feature" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kili_segmentation_annotation_to_geojson_polygon_feature</span><span class="p">(</span><span class="n">segmentation_annotation</span><span class="p">,</span> <span class="n">job_name</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a Kili segmentation annotation to a geojson polygon feature.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>segmentation_annotation</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>a Kili segmentation annotation.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>job_name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>the name of the job to which the annotation belongs.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A geojson polygon feature.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">segmentation</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
    <span class="s1">&#39;boundingPoly&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span><span class="s1">&#39;normalizedVertices&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]},</span>
        <span class="p">{</span><span class="s1">&#39;normalizedVertices&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]}</span>
    <span class="p">],</span>
    <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
    <span class="s1">&#39;mid&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;semantic&#39;</span>
<span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">kili_segmentation_annotation_to_geojson_polygon_feature</span><span class="p">(</span><span class="n">segmentation</span><span class="p">,</span> <span class="s1">&#39;job_name&#39;</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
    <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Polygon&#39;</span><span class="p">,</span>
        <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">[</span>
                <span class="o">...</span>
            <span class="p">],</span>
            <span class="p">[</span>
                <span class="o">...</span>
            <span class="p">]</span>
        <span class="p">]</span>
    <span class="p">},</span>
    <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;mid_object&#39;</span><span class="p">,</span>
    <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;kili&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
            <span class="s1">&#39;children&#39;</span><span class="p">:</span> <span class="p">{},</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;semantic&#39;</span><span class="p">,</span>
            <span class="s1">&#39;job&#39;</span><span class="p">:</span> <span class="s1">&#39;job_name&#39;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/segmentation.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kili_segmentation_annotation_to_geojson_polygon_feature</span><span class="p">(</span>
    <span class="n">segmentation_annotation</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">job_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a Kili segmentation annotation to a geojson polygon feature.</span>

<span class="sd">    Args:</span>
<span class="sd">        segmentation_annotation: a Kili segmentation annotation.</span>
<span class="sd">        job_name: the name of the job to which the annotation belongs.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A geojson polygon feature.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; segmentation = {</span>
<span class="sd">            &#39;children&#39;: {},</span>
<span class="sd">            &#39;boundingPoly&#39;: [</span>
<span class="sd">                {&#39;normalizedVertices&#39;: [...]},</span>
<span class="sd">                {&#39;normalizedVertices&#39;: [...]}</span>
<span class="sd">            ],</span>
<span class="sd">            &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">            &#39;mid&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;type&#39;: &#39;semantic&#39;</span>
<span class="sd">        }</span>
<span class="sd">        &gt;&gt;&gt; kili_segmentation_annotation_to_geojson_polygon_feature(segmentation, &#39;job_name&#39;)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">            &#39;geometry&#39;: {</span>
<span class="sd">                &#39;type&#39;: &#39;Polygon&#39;,</span>
<span class="sd">                &#39;coordinates&#39;: [</span>
<span class="sd">                    [</span>
<span class="sd">                        ...</span>
<span class="sd">                    ],</span>
<span class="sd">                    [</span>
<span class="sd">                        ...</span>
<span class="sd">                    ]</span>
<span class="sd">                ]</span>
<span class="sd">            },</span>
<span class="sd">            &#39;id&#39;: &#39;mid_object&#39;,</span>
<span class="sd">            &#39;properties&#39;: {</span>
<span class="sd">                &#39;kili&#39;: {</span>
<span class="sd">                    &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">                    &#39;children&#39;: {},</span>
<span class="sd">                    &#39;type&#39;: &#39;semantic&#39;,</span>
<span class="sd">                    &#39;job&#39;: &#39;job_name&#39;</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">segmentation_annotation</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;semantic&quot;</span>
    <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Annotation type must be `semantic`, got: </span><span class="si">{</span><span class="n">segmentation_annotation</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Feature&quot;</span><span class="p">,</span>
        <span class="s2">&quot;geometry&quot;</span><span class="p">:</span> <span class="n">kili_segmentation_to_geojson_polygon</span><span class="p">(</span><span class="n">segmentation_annotation</span><span class="p">[</span><span class="s2">&quot;boundingPoly&quot;</span><span class="p">]),</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="s2">&quot;mid&quot;</span> <span class="ow">in</span> <span class="n">segmentation_annotation</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">segmentation_annotation</span><span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">]</span>
    <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;kili&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="n">k</span><span class="p">:</span> <span class="n">v</span> <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">segmentation_annotation</span><span class="o">.</span><span class="n">items</span><span class="p">()</span> <span class="k">if</span> <span class="n">k</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;mid&quot;</span><span class="p">,</span> <span class="s2">&quot;boundingPoly&quot;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="k">if</span> <span class="n">job_name</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;kili&quot;</span><span class="p">][</span><span class="s2">&quot;job&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">job_name</span>
    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.segmentation.kili_segmentation_to_geojson_polygon" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kili_segmentation_to_geojson_polygon</span><span class="p">(</span><span class="n">bounding_poly</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a Kili segmentation to a geojson polygon.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>bounding_poly</code></td>
        <td><code>List[Dict[str, List[Dict[str, Any]]]]</code></td>
        <td><p>a Kili segmentation bounding polygon.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A geojson polygon.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">bounding_poly</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;normalizedVertices&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">&#39;normalizedVertices&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">kili_segmentation_to_geojson_polygon</span><span class="p">(</span><span class="n">bounding_poly</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Polygon&#39;</span><span class="p">,</span>
    <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span>
            <span class="o">...</span>
        <span class="p">],</span>
        <span class="p">[</span>
            <span class="o">...</span>
        <span class="p">]</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/segmentation.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kili_segmentation_to_geojson_polygon</span><span class="p">(</span>
    <span class="n">bounding_poly</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]]],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a Kili segmentation to a geojson polygon.</span>

<span class="sd">    Args:</span>
<span class="sd">        bounding_poly: a Kili segmentation bounding polygon.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A geojson polygon.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; bounding_poly = [</span>
<span class="sd">            {</span>
<span class="sd">                &#39;normalizedVertices&#39;: [...]</span>
<span class="sd">            },</span>
<span class="sd">            {</span>
<span class="sd">                &#39;normalizedVertices&#39;: [...]</span>
<span class="sd">            }</span>
<span class="sd">        ]</span>
<span class="sd">        &gt;&gt;&gt; kili_segmentation_to_geojson_polygon(bounding_poly)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;type&#39;: &#39;Polygon&#39;,</span>
<span class="sd">            &#39;coordinates&#39;: [</span>
<span class="sd">                [</span>
<span class="sd">                    ...</span>
<span class="sd">                ],</span>
<span class="sd">                [</span>
<span class="sd">                    ...</span>
<span class="sd">                ]</span>
<span class="sd">            ]</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ret</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;Polygon&quot;</span><span class="p">,</span> <span class="s2">&quot;coordinates&quot;</span><span class="p">:</span> <span class="p">[]}</span>
    <span class="k">for</span> <span class="n">norm_vertices_dict</span> <span class="ow">in</span> <span class="n">bounding_poly</span><span class="p">:</span>
        <span class="n">bbox</span> <span class="o">=</span> <span class="p">[[</span><span class="n">vertex</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span> <span class="n">vertex</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]]</span> <span class="k">for</span> <span class="n">vertex</span> <span class="ow">in</span> <span class="n">norm_vertices_dict</span><span class="p">[</span><span class="s2">&quot;normalizedVertices&quot;</span><span class="p">]]</span>
        <span class="n">bbox</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bbox</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>  <span class="c1"># the first and last positions must be the same</span>
        <span class="n">ret</span><span class="p">[</span><span class="s2">&quot;coordinates&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">bbox</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">ret</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>

<h3 id="collection">Collection</h3>


  <div class="doc doc-object doc-module">


    <div class="doc doc-contents first">

      <p>Geojson collection module.</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.collection.features_to_feature_collection" class="doc doc-heading">
<code class="highlight language-python"><span class="n">features_to_feature_collection</span><span class="p">(</span><span class="n">features</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a list of features to a feature collection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>features</code></td>
        <td><code>Sequence[Dict]</code></td>
        <td><p>a list of Geojson features.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A Geojson feature collection.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">features</span> <span class="o">=</span> <span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
        <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Point&#39;</span><span class="p">,</span>
            <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">]},</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
        <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Point&#39;</span><span class="p">,</span>
            <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">]},</span>
            <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">features_to_feature_collection</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;FeatureCollection&#39;</span><span class="p">,</span>
    <span class="s1">&#39;features&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
            <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Point&#39;</span><span class="p">,</span>
                <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">]},</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
            <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Point&#39;</span><span class="p">,</span>
                <span class="s1">&#39;coordinates&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">-</span><span class="mf">79.0</span><span class="p">,</span> <span class="o">-</span><span class="mf">3.0</span><span class="p">]},</span>
                <span class="s1">&#39;id&#39;</span><span class="p">:</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/collection.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">features_to_feature_collection</span><span class="p">(</span>
    <span class="n">features</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Dict</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a list of features to a feature collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        features: a list of Geojson features.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A Geojson feature collection.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; features = [</span>
<span class="sd">            {</span>
<span class="sd">                &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">                &#39;geometry&#39;: {</span>
<span class="sd">                    &#39;type&#39;: &#39;Point&#39;,</span>
<span class="sd">                    &#39;coordinates&#39;: [-79.0, -3.0]},</span>
<span class="sd">                    &#39;id&#39;: &#39;1&#39;,</span>
<span class="sd">                }</span>
<span class="sd">            },</span>
<span class="sd">            {</span>
<span class="sd">                &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">                &#39;geometry&#39;: {</span>
<span class="sd">                    &#39;type&#39;: &#39;Point&#39;,</span>
<span class="sd">                    &#39;coordinates&#39;: [-79.0, -3.0]},</span>
<span class="sd">                    &#39;id&#39;: &#39;2&#39;,</span>
<span class="sd">                }</span>
<span class="sd">            }</span>
<span class="sd">        ]</span>
<span class="sd">        &gt;&gt;&gt; features_to_feature_collection(features)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;type&#39;: &#39;FeatureCollection&#39;,</span>
<span class="sd">            &#39;features&#39;: [</span>
<span class="sd">                {</span>
<span class="sd">                    &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">                    &#39;geometry&#39;: {</span>
<span class="sd">                        &#39;type&#39;: &#39;Point&#39;,</span>
<span class="sd">                        &#39;coordinates&#39;: [-79.0, -3.0]},</span>
<span class="sd">                        &#39;id&#39;: &#39;1&#39;,</span>
<span class="sd">                    }</span>
<span class="sd">                },</span>
<span class="sd">                {</span>
<span class="sd">                    &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">                    &#39;geometry&#39;: {</span>
<span class="sd">                        &#39;type&#39;: &#39;Point&#39;,</span>
<span class="sd">                        &#39;coordinates&#39;: [-79.0, -3.0]},</span>
<span class="sd">                        &#39;id&#39;: &#39;2&#39;,</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            ]</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;FeatureCollection&quot;</span><span class="p">,</span> <span class="s2">&quot;features&quot;</span><span class="p">:</span> <span class="nb">list</span><span class="p">(</span><span class="n">features</span><span class="p">)}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.collection.geojson_feature_collection_to_kili_json_response" class="doc doc-heading">
<code class="highlight language-python"><span class="n">geojson_feature_collection_to_kili_json_response</span><span class="p">(</span><span class="n">feature_collection</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a Geojson feature collection to a Kili label json response.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>feature_collection</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>a Geojson feature collection.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A Kili label json response.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This method requires the <code>kili</code> key to be present in the geojson features' properties.
In particular, the <code>kili</code> dictionary of a feature must contain the <code>categories</code> and <code>type</code> of the annotation.
It must also contain the <code>job</code> name.</p>
</div>
<div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">feature_collection</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;FeatureCollection&#39;</span><span class="p">,</span>
    <span class="s1">&#39;features&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
            <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="o">...</span>
            <span class="p">},</span>
            <span class="s1">&#39;properties&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s1">&#39;kili&#39;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
                    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;marker&#39;</span><span class="p">,</span>
                    <span class="s1">&#39;job&#39;</span><span class="p">:</span> <span class="s1">&#39;POINT_DETECTION_JOB&#39;</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">},</span>
    <span class="p">]</span>
<span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">geojson_feature_collection_to_kili_json_response</span><span class="p">(</span><span class="n">feature_collection</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;POINT_DETECTION_JOB&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;annotations&#39;</span><span class="p">:</span> <span class="p">[</span>
            <span class="p">{</span>
                <span class="s1">&#39;categories&#39;</span><span class="p">:</span> <span class="p">[{</span><span class="s1">&#39;name&#39;</span><span class="p">:</span> <span class="s1">&#39;A&#39;</span><span class="p">}],</span>
                <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;marker&#39;</span><span class="p">,</span>
                <span class="s1">&#39;point&#39;</span><span class="p">:</span> <span class="o">...</span>
            <span class="p">}</span>
        <span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/collection.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">geojson_feature_collection_to_kili_json_response</span><span class="p">(</span>
    <span class="n">feature_collection</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
    <span class="c1"># pylint: disable=line-too-long</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a Geojson feature collection to a Kili label json response.</span>

<span class="sd">    Args:</span>
<span class="sd">        feature_collection: a Geojson feature collection.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A Kili label json response.</span>

<span class="sd">    !!! Warning</span>
<span class="sd">        This method requires the `kili` key to be present in the geojson features&#39; properties.</span>
<span class="sd">        In particular, the `kili` dictionary of a feature must contain the `categories` and `type` of the annotation.</span>
<span class="sd">        It must also contain the `job` name.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; feature_collection = {</span>
<span class="sd">            &#39;type&#39;: &#39;FeatureCollection&#39;,</span>
<span class="sd">            &#39;features&#39;: [</span>
<span class="sd">                {</span>
<span class="sd">                    &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">                    &#39;geometry&#39;: {</span>
<span class="sd">                        ...</span>
<span class="sd">                    },</span>
<span class="sd">                    &#39;properties&#39;: {</span>
<span class="sd">                        &#39;kili&#39;: {</span>
<span class="sd">                            &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">                            &#39;type&#39;: &#39;marker&#39;,</span>
<span class="sd">                            &#39;job&#39;: &#39;POINT_DETECTION_JOB&#39;</span>
<span class="sd">                        }</span>
<span class="sd">                    }</span>
<span class="sd">                },</span>
<span class="sd">            ]</span>
<span class="sd">        }</span>
<span class="sd">        &gt;&gt;&gt; geojson_feature_collection_to_kili_json_response(feature_collection)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;POINT_DETECTION_JOB&#39;: {</span>
<span class="sd">                &#39;annotations&#39;: [</span>
<span class="sd">                    {</span>
<span class="sd">                        &#39;categories&#39;: [{&#39;name&#39;: &#39;A&#39;}],</span>
<span class="sd">                        &#39;type&#39;: &#39;marker&#39;,</span>
<span class="sd">                        &#39;point&#39;: ...</span>
<span class="sd">                    }</span>
<span class="sd">                ]</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">assert</span> <span class="p">(</span>
        <span class="n">feature_collection</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;FeatureCollection&quot;</span>
    <span class="p">),</span> <span class="sa">f</span><span class="s2">&quot;Feature collection type must be `FeatureCollection`, got: </span><span class="si">{</span><span class="n">feature_collection</span><span class="p">[</span><span class="s1">&#39;type&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2">&quot;</span>

    <span class="n">annotation_tool_to_converter</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;rectangle&quot;</span><span class="p">:</span> <span class="n">geojson_polygon_feature_to_kili_bbox_annotation</span><span class="p">,</span>
        <span class="s2">&quot;marker&quot;</span><span class="p">:</span> <span class="n">geojson_point_feature_to_kili_point_annotation</span><span class="p">,</span>
        <span class="s2">&quot;polygon&quot;</span><span class="p">:</span> <span class="n">geojson_polygon_feature_to_kili_polygon_annotation</span><span class="p">,</span>
        <span class="s2">&quot;polyline&quot;</span><span class="p">:</span> <span class="n">geojson_linestring_feature_to_kili_line_annotation</span><span class="p">,</span>
        <span class="s2">&quot;semantic&quot;</span><span class="p">:</span> <span class="n">geojson_polygon_feature_to_kili_segmentation_annotation</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">json_response</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">for</span> <span class="n">feature</span> <span class="ow">in</span> <span class="n">feature_collection</span><span class="p">[</span><span class="s2">&quot;features&quot;</span><span class="p">]:</span>
        <span class="k">if</span> <span class="n">feature</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;properties&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;kili&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;job&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Job name is missing in the GeoJson feature </span><span class="si">{</span><span class="n">feature</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">job_name</span> <span class="o">=</span> <span class="n">feature</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;kili&quot;</span><span class="p">][</span><span class="s2">&quot;job&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">feature</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;properties&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;kili&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Annotation `type` is missing in the GeoJson feature </span><span class="si">{</span><span class="n">feature</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="n">annotation_tool</span> <span class="o">=</span> <span class="n">feature</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;kili&quot;</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">annotation_tool</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">annotation_tool_to_converter</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Annotation tool </span><span class="si">{</span><span class="n">annotation_tool</span><span class="si">}</span><span class="s2"> is not supported.&quot;</span><span class="p">)</span>

        <span class="n">kili_annotation</span> <span class="o">=</span> <span class="n">annotation_tool_to_converter</span><span class="p">[</span><span class="n">annotation_tool</span><span class="p">](</span><span class="n">feature</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">job_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">json_response</span><span class="p">:</span>
            <span class="n">json_response</span><span class="p">[</span><span class="n">job_name</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="k">if</span> <span class="s2">&quot;annotations&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">json_response</span><span class="p">[</span><span class="n">job_name</span><span class="p">]:</span>
            <span class="n">json_response</span><span class="p">[</span><span class="n">job_name</span><span class="p">][</span><span class="s2">&quot;annotations&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="n">json_response</span><span class="p">[</span><span class="n">job_name</span><span class="p">][</span><span class="s2">&quot;annotations&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">kili_annotation</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">json_response</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h3 id="kili.utils.labels.geojson.collection.kili_json_response_to_feature_collection" class="doc doc-heading">
<code class="highlight language-python"><span class="n">kili_json_response_to_feature_collection</span><span class="p">(</span><span class="n">json_response</span><span class="p">)</span></code>


</h3>

    <div class="doc doc-contents ">

      <p>Convert a Kili label json response to a Geojson feature collection.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>json_response</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>a Kili label json response.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>A Geojson feature collection.</p></td>
    </tr>
  </tbody>
</table>      <div class="admonition example">
<p class="admonition-title">Example</p>
<div class="highlight"><pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">json_response</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;job_1&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;annotations&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>
    <span class="p">},</span>
    <span class="s1">&#39;job_2&#39;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s1">&#39;annotations&#39;</span><span class="p">:</span> <span class="p">[</span><span class="o">...</span><span class="p">]</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">kili_json_response_to_feature_collection</span><span class="p">(</span><span class="n">json_response</span><span class="p">)</span>
<span class="p">{</span>
    <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;FeatureCollection&#39;</span><span class="p">,</span>
    <span class="s1">&#39;features&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
            <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="o">...</span>
            <span class="p">}</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;Feature&#39;</span><span class="p">,</span>
            <span class="s1">&#39;geometry&#39;</span><span class="p">:</span> <span class="p">{</span>
                <span class="o">...</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</code></pre></div>
</div>

        <details class="quote">
          <summary>Source code in <code>kili/utils/labels/geojson/collection.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">kili_json_response_to_feature_collection</span><span class="p">(</span><span class="n">json_response</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Convert a Kili label json response to a Geojson feature collection.</span>

<span class="sd">    Args:</span>
<span class="sd">        json_response: a Kili label json response.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A Geojson feature collection.</span>

<span class="sd">    !!! Example</span>
<span class="sd">        ```python</span>
<span class="sd">        &gt;&gt;&gt; json_response = {</span>
<span class="sd">            &#39;job_1&#39;: {</span>
<span class="sd">                &#39;annotations&#39;: [...]</span>
<span class="sd">            },</span>
<span class="sd">            &#39;job_2&#39;: {</span>
<span class="sd">                &#39;annotations&#39;: [...]</span>
<span class="sd">            }</span>
<span class="sd">        }</span>
<span class="sd">        &gt;&gt;&gt; kili_json_response_to_feature_collection(json_response)</span>
<span class="sd">        {</span>
<span class="sd">            &#39;type&#39;: &#39;FeatureCollection&#39;,</span>
<span class="sd">            &#39;features&#39;: [</span>
<span class="sd">                {</span>
<span class="sd">                    &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">                    &#39;geometry&#39;: {</span>
<span class="sd">                        ...</span>
<span class="sd">                    }</span>
<span class="sd">                },</span>
<span class="sd">                {</span>
<span class="sd">                    &#39;type&#39;: &#39;Feature&#39;,</span>
<span class="sd">                    &#39;geometry&#39;: {</span>
<span class="sd">                        ...</span>
<span class="sd">                    }</span>
<span class="sd">                }</span>
<span class="sd">            ]</span>
<span class="sd">        }</span>
<span class="sd">        ```</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">features</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="n">annotation_tool_to_converter</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;rectangle&quot;</span><span class="p">:</span> <span class="n">kili_bbox_annotation_to_geojson_polygon_feature</span><span class="p">,</span>
        <span class="s2">&quot;marker&quot;</span><span class="p">:</span> <span class="n">kili_point_annotation_to_geojson_point_feature</span><span class="p">,</span>
        <span class="s2">&quot;polygon&quot;</span><span class="p">:</span> <span class="n">kili_polygon_annotation_to_geojson_polygon_feature</span><span class="p">,</span>
        <span class="s2">&quot;polyline&quot;</span><span class="p">:</span> <span class="n">kili_line_annotation_to_geojson_linestring_feature</span><span class="p">,</span>
        <span class="s2">&quot;semantic&quot;</span><span class="p">:</span> <span class="n">kili_segmentation_annotation_to_geojson_polygon_feature</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">jobs_skipped</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">ann_tools_not_supported</span> <span class="o">=</span> <span class="nb">set</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">job_name</span><span class="p">,</span> <span class="n">job_response</span> <span class="ow">in</span> <span class="n">json_response</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">if</span> <span class="s2">&quot;annotations&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">job_response</span><span class="p">:</span>
            <span class="n">jobs_skipped</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">job_name</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="k">for</span> <span class="n">ann</span> <span class="ow">in</span> <span class="n">job_response</span><span class="p">[</span><span class="s2">&quot;annotations&quot;</span><span class="p">]:</span>
            <span class="n">annotation_tool</span> <span class="o">=</span> <span class="n">ann</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">annotation_tool</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">annotation_tool_to_converter</span><span class="p">:</span>
                <span class="n">ann_tools_not_supported</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">annotation_tool</span><span class="p">)</span>
                <span class="k">continue</span>

            <span class="n">converter</span> <span class="o">=</span> <span class="n">annotation_tool_to_converter</span><span class="p">[</span><span class="n">annotation_tool</span><span class="p">]</span>

            <span class="k">try</span><span class="p">:</span>
                <span class="n">feature</span> <span class="o">=</span> <span class="n">converter</span><span class="p">(</span><span class="n">ann</span><span class="p">,</span> <span class="n">job_name</span><span class="o">=</span><span class="n">job_name</span><span class="p">)</span>
                <span class="n">features</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">ConversionError</span> <span class="k">as</span> <span class="n">error</span><span class="p">:</span>
                <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
                    <span class="n">error</span><span class="o">.</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
                    <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="k">continue</span>

    <span class="k">if</span> <span class="n">jobs_skipped</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Jobs </span><span class="si">{</span><span class="n">jobs_skipped</span><span class="si">}</span><span class="s2"> cannot be exported to GeoJson format.&quot;</span><span class="p">,</span> <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">ann_tools_not_supported</span><span class="p">:</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Annotation tools </span><span class="si">{</span><span class="n">ann_tools_not_supported</span><span class="si">}</span><span class="s2"> are not supported and will be skipped.&quot;</span><span class="p">,</span>
            <span class="n">stacklevel</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">return</span> <span class="n">features_to_feature_collection</span><span class="p">(</span><span class="n">features</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.525ec568.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.4/katex.min.js"></script>
      
        <script src="../../extra_javascript/katex.js"></script>
      
    
  </body>
</html>